(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,91650,e=>{"use strict";let l=(0,e.i(65474).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>l],91650)},12691,e=>{"use strict";var l=e.i(47132),s=e.i(74248),n=e.i(94250),r=e.i(39803),i=e.i(90197),a=e.i(6505),t=e.i(91650),o=e.i(42460),d=e.i(64405),c=e.i(45045),m=e.i(25336),h=e.i(98863),u=e.i(95993);let x=u.z.object({name:u.z.string().min(1,"Le nom est requis"),email:u.z.string().email("Email invalide").optional().or(u.z.literal("")).nullable(),phone:u.z.string().optional().nullable(),address:u.z.string().optional().nullable(),notes:u.z.string().optional().nullable()});var j=e.i(53507),p=e.i(28717),g=e.i(24123),C=e.i(9194),b=e.i(30903);function F({open:e,onOpenChange:n,initialData:i,clientId:a}){let t=(0,d.useCreateClient)(),o=(0,d.useUpdateClient)(a||""),u=(0,m.useForm)({resolver:(0,h.zodResolver)(x),defaultValues:i||{name:"",email:"",phone:"",address:"",notes:""}});(0,s.useEffect)(()=>{u.reset(i||{name:"",email:"",phone:"",address:"",notes:""})},[i,u]);let F=async e=>{let l=a?o:t;g.toast.promise(l.mutateAsync(e).then(()=>{n(!1),u.reset()}),{loading:a?"Mise à jour...":"Création...",success:a?"Client mis à jour !":"Client créé !",error:e=>"Erreur: "+e.message})},v=t.isPending||o.isPending;return(0,l.jsxs)(c.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)(c.DialogHeader,{children:(0,l.jsx)(c.DialogTitle,{children:a?"Modifier le client":"Nouveau client"})}),(0,l.jsx)(j.Form,{...u,children:(0,l.jsxs)("form",{onSubmit:u.handleSubmit(F),children:[(0,l.jsx)(j.FormField,{control:u.control,name:"name",render:({field:e})=>(0,l.jsxs)(j.FormItem,{children:[(0,l.jsx)(j.FormLabel,{children:"Nom *"}),(0,l.jsx)(j.FormControl,{children:(0,l.jsx)(p.Input,{placeholder:"Nom du client",...e})}),(0,l.jsx)(j.FormMessage,{})]})}),(0,l.jsx)(j.FormField,{control:u.control,name:"email",render:({field:e})=>(0,l.jsxs)(j.FormItem,{children:[(0,l.jsx)(j.FormLabel,{children:"Email"}),(0,l.jsx)(j.FormControl,{children:(0,l.jsx)(p.Input,{type:"email",placeholder:"email@example.com",...e,value:e.value||""})}),(0,l.jsx)(j.FormMessage,{})]})}),(0,l.jsx)(j.FormField,{control:u.control,name:"phone",render:({field:e})=>(0,l.jsxs)(j.FormItem,{children:[(0,l.jsx)(j.FormLabel,{children:"Téléphone"}),(0,l.jsx)(j.FormControl,{children:(0,l.jsx)(p.Input,{placeholder:"+33 6 12 34 56 78",...e,value:e.value||""})}),(0,l.jsx)(j.FormMessage,{})]})}),(0,l.jsx)(j.FormField,{control:u.control,name:"address",render:({field:e})=>(0,l.jsxs)(j.FormItem,{children:[(0,l.jsx)(j.FormLabel,{children:"Adresse"}),(0,l.jsx)(j.FormControl,{children:(0,l.jsx)(p.Input,{placeholder:"Adresse complète",...e,value:e.value||""})}),(0,l.jsx)(j.FormMessage,{})]})}),(0,l.jsx)(j.FormField,{control:u.control,name:"notes",render:({field:e})=>(0,l.jsxs)(j.FormItem,{children:[(0,l.jsx)(j.FormLabel,{children:"Notes"}),(0,l.jsx)(j.FormControl,{children:(0,l.jsx)(p.Input,{placeholder:"Notes additionnelles",...e,value:e.value||""})}),(0,l.jsx)(j.FormMessage,{})]})}),(0,l.jsxs)(c.DialogFooter,{className:"mt-4",children:[(0,l.jsx)(b.DialogClose,{asChild:!0,children:(0,l.jsx)(r.Button,{type:"button",variant:"outline",children:"Annuler"})}),(0,l.jsx)(r.Button,{type:"submit",disabled:v,children:v?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer"})]})]})})]})}function v({open:e,onOpenChange:s,initialData:n,clientId:r}){return(0,l.jsx)(c.Dialog,{open:e,onOpenChange:s,children:(0,l.jsx)(F,{open:e,onOpenChange:s,initialData:n,clientId:r})})}var T=e.i(79882);function f(){let{data:e,isLoading:c,error:m}=(0,d.useClients)(),[h,u]=(0,s.useState)(!1),[x,j]=(0,s.useState)(null),p=(0,d.useDeleteClient)(x?.id),C=e||[];if(c)return(0,l.jsx)("div",{children:"Chargement..."});if(m)return(0,l.jsx)("div",{children:"Erreur lors du chargement des clients"});let b=async e=>{g.toast.promise(p.mutateAsync,{loading:"Suppression du client...",success:"Client supprimé",error:e=>"Erreur : "+e.message})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.Card,{children:[(0,l.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,l.jsx)(o.CardTitle,{className:"px-4",children:(0,l.jsx)(t.Users,{})}),(0,l.jsxs)(r.Button,{onClick:()=>{j(null),u(!0)},children:[(0,l.jsx)(a.Plus,{className:"mr-2 h-4 w-4"})," Nouveau Client"]})]}),(0,l.jsx)(o.CardContent,{children:(0,l.jsxs)(n.Table,{children:[(0,l.jsx)(n.TableHeader,{children:(0,l.jsxs)(n.TableRow,{children:[(0,l.jsx)(n.TableHead,{children:"Nom"}),(0,l.jsx)(n.TableHead,{children:"Email"}),(0,l.jsx)(n.TableHead,{children:"Téléphone"}),(0,l.jsx)(n.TableHead,{className:"text-right",children:"Actions"})]})}),(0,l.jsxs)(n.TableBody,{children:[C.map(e=>(0,l.jsxs)(n.TableRow,{children:[(0,l.jsx)(n.TableCell,{className:"font-medium",children:e.name}),(0,l.jsx)(n.TableCell,{children:e.email||"-"}),(0,l.jsx)(n.TableCell,{children:e.phone||"-"}),(0,l.jsxs)(n.TableCell,{className:"text-right",children:[(0,l.jsx)(r.Button,{variant:"ghost",size:"icon",onClick:()=>{j(e),u(!0)},children:(0,l.jsx)(i.Edit,{className:"h-4 w-4"})}),(0,l.jsx)(T.DeleteDialiog,{handleDelete:b,id:e.id,ressource:"client"})]})]},e.id)),0===C.length&&(0,l.jsx)(n.TableRow,{children:(0,l.jsx)(n.TableCell,{colSpan:4,className:"text-center text-muted-foreground",children:"Aucun client trouvé."})})]})]})})]}),(0,l.jsx)(v,{open:h,onOpenChange:()=>{u(!1),j(null)},initialData:x||void 0,clientId:x?.id})]})}e.s(["ClientTable",()=>f],12691)}]);