(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97954,39541,e=>{"use strict";let t,n;var r=e.i(74248),o=e.i(32846),s=e.i(23394),i=e.i(91),a=e.i(43659),l=e.i(51677),u=e.i(73403),c=e.i(41689),d=e.i(5149),f=e.i(70323),p=e.i(47132),h="rovingFocusGroup.onEntryFocus",v={bubbles:!1,cancelable:!0},m="RovingFocusGroup",[g,b,y]=(0,s.createCollection)(m),[w,E]=(0,a.createContextScope)(m,[y]),[R,T]=w(m),O=r.forwardRef((e,t)=>(0,p.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,p.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,p.jsx)(S,{...e,ref:t})})}));O.displayName=m;var S=r.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:l,currentTabStopId:g,defaultCurrentTabStopId:y,onCurrentTabStopIdChange:w,onEntryFocus:E,preventScrollOnEntryFocus:T=!1,...O}=e,S=r.useRef(null),_=(0,i.useComposedRefs)(t,S),I=(0,f.useDirection)(l),[L,U]=(0,d.useControllableState)({prop:g,defaultProp:y??null,onChange:w,caller:m}),[x,P]=r.useState(!1),C=(0,c.useCallbackRef)(E),j=b(n),D=r.useRef(!1),[N,B]=r.useState(0);return r.useEffect(()=>{let e=S.current;if(e)return e.addEventListener(h,C),()=>e.removeEventListener(h,C)},[C]),(0,p.jsx)(R,{scope:n,orientation:s,dir:I,loop:a,currentTabStopId:L,onItemFocus:r.useCallback(e=>U(e),[U]),onItemShiftTab:r.useCallback(()=>P(!0),[]),onFocusableItemAdd:r.useCallback(()=>B(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>B(e=>e-1),[]),children:(0,p.jsx)(u.Primitive.div,{tabIndex:x||0===N?-1:0,"data-orientation":s,...O,ref:_,style:{outline:"none",...e.style},onMouseDown:(0,o.composeEventHandlers)(e.onMouseDown,()=>{D.current=!0}),onFocus:(0,o.composeEventHandlers)(e.onFocus,e=>{let t=!D.current;if(e.target===e.currentTarget&&t&&!x){let t=new CustomEvent(h,v);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=j().filter(e=>e.focusable);A([e.find(e=>e.active),e.find(e=>e.id===L),...e].filter(Boolean).map(e=>e.ref.current),T)}}D.current=!1}),onBlur:(0,o.composeEventHandlers)(e.onBlur,()=>P(!1))})})}),_="RovingFocusGroupItem",I=r.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,children:c,...d}=e,f=(0,l.useId)(),h=a||f,v=T(_,n),m=v.currentTabStopId===h,y=b(n),{onFocusableItemAdd:w,onFocusableItemRemove:E,currentTabStopId:R}=v;return r.useEffect(()=>{if(s)return w(),()=>E()},[s,w,E]),(0,p.jsx)(g.ItemSlot,{scope:n,id:h,focusable:s,active:i,children:(0,p.jsx)(u.Primitive.span,{tabIndex:m?0:-1,"data-orientation":v.orientation,...d,ref:t,onMouseDown:(0,o.composeEventHandlers)(e.onMouseDown,e=>{s?v.onItemFocus(h):e.preventDefault()}),onFocus:(0,o.composeEventHandlers)(e.onFocus,()=>v.onItemFocus(h)),onKeyDown:(0,o.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void v.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let o=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(o))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(o)))return L[o]}(e,v.orientation,v.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let o=y().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)o.reverse();else if("prev"===t||"next"===t){var n,r;"prev"===t&&o.reverse();let s=o.indexOf(e.currentTarget);o=v.loop?(n=o,r=s+1,n.map((e,t)=>n[(r+t)%n.length])):o.slice(s+1)}setTimeout(()=>A(o))}}),children:"function"==typeof c?c({isCurrentTabStop:m,hasTabStop:null!=R}):c})})});I.displayName=_;var L={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function A(e,t=!1){let n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}e.s(["Item",()=>I,"Root",()=>O,"createRovingFocusGroupScope",()=>E],97954);var U=e.i(24123);e.i(10849);var x=e.i(58478),P=e.i(36026);let C=Object.create(null),j=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?C:globalThis),D=new Proxy(C,{get:(e,t)=>j()[t]??C[t],has:(e,t)=>t in j()||t in C,set:(e,t,n)=>(j(!0)[t]=n,!0),deleteProperty(e,t){if(!t)return!1;let n=j(!0);return delete n[t],!0},ownKeys:()=>Object.keys(j(!0))});function N(e,t){return void 0!==P.default&&P.default.env?P.default.env[e]??t:"undefined"!=typeof Deno?Deno.env.get(e)??t:"undefined"!=typeof Bun?Bun.env[e]??t:t}void 0!==P.default&&P.default.env,Object.freeze({get BETTER_AUTH_SECRET(){return N("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return N("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return N("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return N("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return N("NODE_ENV","development")},get PACKAGE_VERSION(){return N("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return N("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}});let B={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},$=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),M=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/],k="\x1b[0m",F="\x1b[31m",q="\x1b[32m",H="\x1b[33m",G="\x1b[34m",W="\x1b[35m",K=["debug","info","success","warn","error"],V={info:G,success:q,warn:H,error:F,debug:W};t=(void 0)??"error",n=1!==function(){if(void 0!==N("FORCE_COLOR"))switch(N("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==N("NODE_DISABLE_COLORS")&&""!==N("NODE_DISABLE_COLORS")||void 0!==N("NO_COLOR")&&""!==N("NO_COLOR")||"dumb"===N("TERM"))return 1;if(N("TMUX"))return 24;if("TF_BUILD"in D&&"AGENT_NAME"in D)return 4;if("CI"in D){for(let{0:e,1:t}of $)if(e in D)return t;return"codeship"===N("CI_NAME")?8:1}if("TEAMCITY_VERSION"in D)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(N("TEAMCITY_VERSION"))?4:1;switch(N("TERM_PROGRAM")){case"iTerm.app":if(!N("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(N("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===N("COLORTERM")||"24bit"===N("COLORTERM"))return 24;if(N("TERM")){if(null!==/truecolor/.exec(N("TERM")))return 24;if(null!==/^xterm-256/.exec(N("TERM")))return 8;let e=N("TERM").toLowerCase();if(B[e])return B[e];if(M.some(t=>null!==t.exec(e)))return 4}return N("COLORTERM")?4:1}(),Object.fromEntries(K.map(e=>[e,(...[r,...o])=>((e,r,o=[])=>{let s;if(!(K.indexOf(e)>=K.indexOf(t)))return;let i=(s=new Date().toISOString(),n?`\x1b[2m${s}${k} ${V[e]}${e.toUpperCase()}${k} \x1b[1m[Better Auth]:${k} ${r}`:`${s} ${e.toUpperCase()} [Better Auth]: ${r}`);"error"===e?console.error(i,...o):"warn"===e?console.warn(i,...o):console.log(i,...o)})(e,r,o)]));var J=class extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}};function Y(e,t="/api/auth"){try{let t=new URL(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new J(`Invalid base URL: ${e}. URL must include 'http://' or 'https://'`)}catch(t){if(t instanceof J)throw t;throw new J(`Invalid base URL: ${e}. Please provide a valid base URL.`,String(t))}if(function(e){try{return"/"!==(new URL(e).pathname.replace(/\/+$/,"")||"/")}catch(t){throw new J(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;let n=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:`/${t}`,`${n}${t}`):n}let z={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},X=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,Z={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0},Q=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/,ee=[],et=0,en=0,er=e=>{let t=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),lc:0,listen:e=>(n.lc=t.push(e),()=>{for(let t=et+4;t<ee.length;)ee[t]===e?ee.splice(t,4):t+=4;let r=t.indexOf(e);~r&&(t.splice(r,1),--n.lc||n.off())}),notify(e,r){en++;let o=!ee.length;for(let o of t)ee.push(o,n.value,e,r);if(o){for(et=0;et<ee.length;et+=4)ee[et](ee[et+1],ee[et+2],ee[et+3]);ee.length=0}},off(){},set(e){let t=n.value;t!==e&&(n.value=e,n.notify(t))},subscribe(e){let t=n.listen(e);return e(n.value),t},value:e};return n},eo=(e,t)=>{var n,r;return n=n=>{let r=t(n);r&&e.events[6].push(r)},r=t=>{let n=e.listen;e.listen=(...r)=>(e.lc||e.active||(e.active=!0,t()),n(...r));let r=e.off;return e.events[6]=[],e.off=()=>{r(),setTimeout(()=>{if(e.active&&!e.lc){for(let t of(e.active=!1,e.events[6]))t();e.events[6]=[]}},1e3)},()=>{e.listen=n,e.off=r}},e.events=e.events||{},e.events[15]||(e.events[15]=r(t=>{e.events[5].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[5]=e.events[5]||[],e.events[5].push(n),()=>{let t=e.events[5],r=t.indexOf(n);t.splice(r,1),t.length||(delete e.events[5],e.events[15](),delete e.events[15])}};var es=Object.defineProperty,ei=Object.defineProperties,ea=Object.getOwnPropertyDescriptors,el=Object.getOwnPropertySymbols,eu=Object.prototype.hasOwnProperty,ec=Object.prototype.propertyIsEnumerable,ed=(e,t,n)=>t in e?es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ef=(e,t)=>{for(var n in t||(t={}))eu.call(t,n)&&ed(e,n,t[n]);if(el)for(var n of el(t))ec.call(t,n)&&ed(e,n,t[n]);return e},ep=(e,t)=>ei(e,ea(t)),eh=class extends Error{constructor(e,t,n){super(t||e.toString(),{cause:n}),this.status=e,this.statusText=t,this.error=n}},ev=async(e,t)=>{var n,r,o,s,i,a;let l=t||{},u={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:l,hooks:u};for(let c of(null==t?void 0:t.plugins)||[]){if(c.init){let r=await (null==(n=c.init)?void 0:n.call(c,e.toString(),t));l=r.options||l,e=r.url}u.onRequest.push(null==(r=c.hooks)?void 0:r.onRequest),u.onResponse.push(null==(o=c.hooks)?void 0:o.onResponse),u.onSuccess.push(null==(s=c.hooks)?void 0:s.onSuccess),u.onError.push(null==(i=c.hooks)?void 0:i.onError),u.onRetry.push(null==(a=c.hooks)?void 0:a.onRetry)}return{url:e,options:l,hooks:u}},em=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},eg=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}},eb=async e=>{let t={},n=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let r=await n(e.auth.token);if(!r)return t;t.authorization=`Bearer ${r}`}else if("Basic"===e.auth.type){let r=n(e.auth.username),o=n(e.auth.password);if(!r||!o)return t;t.authorization=`Basic ${btoa(`${r}:${o}`)}`}else if("Custom"===e.auth.type){let r=n(e.auth.value);if(!r)return t;t.authorization=`${n(e.auth.prefix)} ${r}`}}return t},ey=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function ew(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function eE(e){try{return JSON.parse(e)}catch(t){return e}}function eR(e){return"function"==typeof e}async function eT(e){let t=new Headers(null==e?void 0:e.headers);for(let[n,r]of Object.entries(await eb(e)||{}))t.set(n,r);if(!t.has("content-type")){let n=ew(null==e?void 0:e.body)?"application/json":null;n&&t.set("content-type",n)}return t}var eO=class e extends Error{constructor(t,n){super(n||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function eS(e,t){let n=await e["~standard"].validate(t);if(n.issues)throw new eO(n.issues);return n.value}var e_=["get","post","put","patch","delete"],eI=async(e,t)=>{var n,r,o,s,i,a,l,u;let c,{hooks:d,url:f,options:p}=await ev(e,t),h=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&eR(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&eR(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(p),v=new AbortController,m=null!=(n=p.signal)?n:v.signal,g=function(e,t){let{baseURL:n,params:r,query:o}=t||{query:{},params:{},baseURL:""},s=e.startsWith("http")?e.split("/").slice(0,3).join("/"):n||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];e_.includes(t)&&(e=e.replace(`@${t}/`,"/"))}s.endsWith("/")||(s+="/");let[i,a]=e.replace(s,"").split("?"),l=new URLSearchParams(a);for(let[e,t]of Object.entries(o||{}))null!=t&&l.set(e,String(t));if(r)if(Array.isArray(r))for(let[e,t]of i.split("/").filter(e=>e.startsWith(":")).entries()){let n=r[e];i=i.replace(t,n)}else for(let[e,t]of Object.entries(r))i=i.replace(`:${e}`,String(t));(i=i.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(i=i.slice(1));let u=l.toString();return(u=u.length>0?`?${u}`.replace(/\+/g,"%20"):"",s.startsWith("http"))?new URL(`${i}${u}`,s):`${s}${i}${u}`}(f,p),b=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(ew(e.body)&&!t.has("content-type")){for(let[t,n]of Object.entries(null==e?void 0:e.body))n instanceof Date&&(e.body[t]=n.toISOString());return JSON.stringify(e.body)}return e.body}(p),y=await eT(p),w=function(e,t){var n;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let r=null==(n=e.split("@")[1])?void 0:n.split("/")[0];return e_.includes(r)?r.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(f,p),E=ep(ef({},p),{url:g,headers:y,body:b,method:w,signal:m});for(let e of d.onRequest)if(e){let t=await e(E);t instanceof Object&&(E=t)}("pipeTo"in E&&"function"==typeof E.pipeTo||"function"==typeof(null==(r=null==t?void 0:t.body)?void 0:r.pipe))&&!("duplex"in E)&&(E.duplex="half");let{clearTimeout:R}=(!(null==p?void 0:p.signal)&&(null==p?void 0:p.timeout)&&(c=setTimeout(()=>null==v?void 0:v.abort(),null==p?void 0:p.timeout)),{abortTimeout:c,clearTimeout:()=>{c&&clearTimeout(c)}}),T=await h(E.url,E);R();let O={response:T,request:E};for(let e of d.onResponse)if(e){let n=await e(ep(ef({},O),{response:(null==(o=null==t?void 0:t.hookOptions)?void 0:o.cloneResponse)?T.clone():T}));n instanceof Response?T=n:n instanceof Object&&(T=n.response)}if(T.ok){if("HEAD"===E.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let r=t.split(";").shift()||"";return ey.test(r)?"json":n.has(r)||r.startsWith("text/")?"text":"blob"}(T),n={data:"",response:T,request:E};if("json"===e||"text"===e){let e=await T.text(),t=null!=(s=E.jsonParser)?s:eE;n.data=await t(e)}else n.data=await T[e]();for(let e of((null==E?void 0:E.output)&&E.output&&!E.disableValidation&&(n.data=await eS(E.output,n.data)),d.onSuccess))e&&await e(ep(ef({},n),{response:(null==(i=null==t?void 0:t.hookOptions)?void 0:i.cloneResponse)?T.clone():T}));return(null==t?void 0:t.throw)?n.data:{data:n.data,error:null}}let S=null!=(a=null==t?void 0:t.jsonParser)?a:eE,_=await T.text(),I=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(_),L=I?await S(_):null,A={response:T,responseText:_,request:E,error:ep(ef({},L),{status:T.status,statusText:T.statusText})};for(let e of d.onError)e&&await e(ep(ef({},A),{response:(null==(l=null==t?void 0:t.hookOptions)?void 0:l.cloneResponse)?T.clone():T}));if(null==t?void 0:t.retry){let n=function(e){if("number"==typeof e)return new em({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new em(e);case"exponential":return new eg(e);default:throw Error("Invalid retry strategy")}}(t.retry),r=null!=(u=t.retryAttempt)?u:0;if(await n.shouldAttemptRetry(r,T)){for(let e of d.onRetry)e&&await e(O);let o=n.getDelay(r);return await new Promise(e=>setTimeout(e,o)),await eI(e,ep(ef({},t),{retryAttempt:r+1}))}}if(null==t?void 0:t.throw)throw new eh(T.status,T.statusText,I?L:_);return{data:null,error:ep(ef({},L),{status:T.status,statusText:T.statusText})}};let eL=Symbol.for("better-auth:broadcast-channel");var eA=class{listeners=new Set;name;constructor(e="better-auth.message"){this.name=e}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}post(e){if("undefined"!=typeof window)try{localStorage.setItem(this.name,JSON.stringify({...e,timestamp:Math.floor(Date.now()/1e3)}))}catch{}}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};let e=e=>{if(e.key!==this.name)return;let t=JSON.parse(e.newValue??"{}");t?.event==="session"&&t?.data&&this.listeners.forEach(e=>e(t))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}};function eU(e="better-auth.message"){return globalThis[eL]||(globalThis[eL]=new eA(e)),globalThis[eL]}let ex=Symbol.for("better-auth:focus-manager");var eP=class{listeners=new Set;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setFocused(e){this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||"undefined"==typeof document||void 0===window.addEventListener)return()=>{};let e=()=>{"visible"===document.visibilityState&&this.setFocused(!0)};return document.addEventListener("visibilitychange",e,!1),()=>{document.removeEventListener("visibilitychange",e,!1)}}};function eC(){return globalThis[ex]||(globalThis[ex]=new eP),globalThis[ex]}let ej=Symbol.for("better-auth:online-manager");var eD=class{listeners=new Set;isOnline="undefined"==typeof navigator||navigator.onLine;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setOnline(e){this.isOnline=e,this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};let e=()=>this.setOnline(!0),t=()=>this.setOnline(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e,!1),window.removeEventListener("offline",t,!1)}}};function eN(){return globalThis[ej]||(globalThis[ej]=new eD),globalThis[ej]}let eB=()=>"undefined"==typeof window,e$=()=>Math.floor(Date.now()/1e3),eM={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}},ek=function(e){var t,n;let{pluginPathMethods:o,pluginsActions:s,pluginsAtoms:i,$fetch:a,$store:l,atomListeners:u}=((e,t)=>{var n;let r,o,s="credentials"in Request.prototype,i=function(e,t,n,r,o){if(e)return Y(e,t);if(!1!==r){let e=D.BETTER_AUTH_URL||D.NEXT_PUBLIC_BETTER_AUTH_URL||D.PUBLIC_BETTER_AUTH_URL||D.NUXT_PUBLIC_BETTER_AUTH_URL||D.NUXT_PUBLIC_AUTH_URL||("/"!==D.BASE_URL?D.BASE_URL:void 0);if(e)return Y(e,t)}n?.headers.get("x-forwarded-host"),n?.headers.get("x-forwarded-proto");if(n){let e=function(e){try{let t=new URL(e);return"null"===t.origin?null:t.origin}catch(e){return null}}(n.url);if(!e)throw new J("Could not get origin from request. Please provide a valid base URL.");return Y(e,t)}if("undefined"!=typeof window&&window.location)return Y(window.location.origin,t)}(e?.baseURL,e?.basePath,void 0,void 0)??"/api/auth",a=e?.plugins?.flatMap(e=>e.fetchPlugins).filter(e=>void 0!==e)||[],l={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:e?.fetchOptions?.onSuccess,onError:e?.fetchOptions?.onError,onRequest:e?.fetchOptions?.onRequest,onResponse:e?.fetchOptions?.onResponse}},{onSuccess:u,onError:c,onRequest:d,onResponse:f,...p}=e?.fetchOptions||{},h=(n={baseURL:i,...s?{credentials:"include"}:{},method:"GET",jsonParser:e=>e?function(e,t={strict:!0}){return function(e,t={}){let{strict:n=!1,warnings:r=!1,reviver:o,parseDates:s=!0}=t;if("string"!=typeof e)return e;let i=e.trim();if(i.length>0&&'"'===i[0]&&i.endsWith('"')&&!i.slice(1,-1).includes('"'))return i.slice(1,-1);let a=i.toLowerCase();if(a.length<=9&&a in Z)return Z[a];if(!X.test(i)){if(n)throw SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(z).some(([e,t])=>{let n=t.test(i);return n&&r&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${e} pattern`),n})&&n)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(i,(e,t)=>{if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){r&&console.warn(`[better-json] Dropping "${e}" key to prevent prototype pollution`);return}if(s&&"string"==typeof t){let e=function(e){let t=Q.exec(e);if(!t)return null;let[,n,r,o,s,i,a,l,u,c,d]=t,f=new Date(Date.UTC(parseInt(n,10),parseInt(r,10)-1,parseInt(o,10),parseInt(s,10),parseInt(i,10),parseInt(a,10),l?parseInt(l.padEnd(3,"0"),10):0));if(u){let e=(60*parseInt(c,10)+parseInt(d,10))*("+"===u?-1:1);f.setUTCMinutes(f.getUTCMinutes()+e)}return f instanceof Date&&!isNaN(f.getTime())?f:null}(t);if(e)return e}return o?o(e,t):t})}catch(t){if(n)throw t;return e}}(e,t)}(e,{strict:!1}):null,customFetchImpl:fetch,...p,plugins:[l,...p.plugins||[],...e?.disableDefaultFetchPlugins?[]:[eM],...a]},async function(e,t){let r,o=ep(ef(ef({},n),t),{plugins:[...(null==n?void 0:n.plugins)||[],(r=n||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,t){var n,o,s,i;let a=(null==(o=null==(n=r.plugins)?void 0:n.find(t=>{var n;return null!=(n=t.schema)&&!!n.config&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))}))?void 0:o.schema)||r.schema;if(a){let n=e;(null==(s=a.config)?void 0:s.prefix)&&n.startsWith(a.config.prefix)&&(n=n.replace(a.config.prefix,""),a.config.baseURL&&(e=e.replace(a.config.prefix,a.config.baseURL))),(null==(i=a.config)?void 0:i.baseURL)&&n.startsWith(a.config.baseURL)&&(n=n.replace(a.config.baseURL,""));let r=a.schema[n];if(r){let n=ep(ef({},t),{method:r.method,output:r.output});return(null==t?void 0:t.disableValidation)||(n=ep(ef({},n),{body:r.input?await eS(r.input,null==t?void 0:t.body):null==t?void 0:t.body,params:r.params?await eS(r.params,null==t?void 0:t.params):null==t?void 0:t.params,query:r.query?await eS(r.query,null==t?void 0:t.query):null==t?void 0:t.query})),{url:e,options:n}}}return{url:e,options:t}}})]});if(null==n?void 0:n.catchAllError)try{return await eI(e,o)}catch(e){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:e}}}return await eI(e,o)}),{$sessionSignal:v,session:m}=(o=((e,t,n,r)=>{let o=er({data:null,error:null,isPending:!0,isRefetching:!1,refetch:e=>s(e)}),s=async e=>new Promise(s=>{let i="function"==typeof r?r({data:o.get().data,error:o.get().error,isPending:o.get().isPending}):r;n(t,{...i,query:{...i?.query,...e?.query},async onSuccess(e){o.set({data:e.data,error:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await i?.onSuccess?.(e)},async onError(e){let{request:t}=e,n="number"==typeof t.retry?t.retry:t.retry?.attempts,r=t.retryAttempt||0;n&&r<n||(o.set({error:e.error,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await i?.onError?.(e))},async onRequest(e){let t=o.get();o.set({isPending:null===t.data,data:t.data,error:null,isRefetching:!0,refetch:o.value.refetch}),await i?.onRequest?.(e)}}).catch(e=>{o.set({error:e,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch})}).finally(()=>{s(void 0)})});e=Array.isArray(e)?e:[e];let i=!1;for(let t of e)t.subscribe(async()=>{eB()||(i?await s():eo(o,()=>{let e=setTimeout(async()=>{i||(await s(),i=!0)},0);return()=>{o.off(),t.off(),clearTimeout(e)}}))});return o})(r=er(!1),"/get-session",h,{method:"GET"}),eo(o,()=>{let t=function(e){let{sessionAtom:t,sessionSignal:n,$fetch:r,options:o={}}=e,s=o.sessionOptions?.refetchInterval??0,i=o.sessionOptions?.refetchOnWindowFocus??!0,a=o.sessionOptions?.refetchWhenOffline??!1,l={lastSync:0,lastSessionRequest:0,cachedSession:void 0},u=e=>{if(!(a||eN().isOnline))return;if(e?.event==="storage"){l.lastSync=e$(),n.set(!n.get());return}let o=t.get();if(e?.event==="poll"){l.lastSessionRequest=e$(),r("/get-session").then(e=>{t.set({...o,data:e.data,error:e.error||null}),l.lastSync=e$(),n.set(!n.get())}).catch(()=>{});return}e?.event==="visibilitychange"&&e$()-l.lastSessionRequest<5&&o?.data!==null&&o?.data!==void 0||(o?.data===null||o?.data===void 0||e?.event==="visibilitychange")&&(e?.event==="visibilitychange"&&(l.lastSessionRequest=e$()),l.lastSync=e$(),n.set(!n.get()))};return{init:()=>{s&&s>0&&(l.pollInterval=setInterval(()=>{t.get()?.data&&u({event:"poll"})},1e3*s)),l.unsubscribeBroadcast=eU().subscribe(()=>{u({event:"storage"})}),i&&(l.unsubscribeFocus=eC().subscribe(()=>{u({event:"visibilitychange"})})),l.unsubscribeOnline=eN().subscribe(e=>{e&&u({event:"visibilitychange"})}),eU().setup(),eC().setup(),eN().setup()},cleanup:()=>{l.pollInterval&&(clearInterval(l.pollInterval),l.pollInterval=void 0),l.unsubscribeBroadcast&&(l.unsubscribeBroadcast(),l.unsubscribeBroadcast=void 0),l.unsubscribeFocus&&(l.unsubscribeFocus(),l.unsubscribeFocus=void 0),l.unsubscribeOnline&&(l.unsubscribeOnline(),l.unsubscribeOnline=void 0),l.lastSync=0,l.lastSessionRequest=0,l.cachedSession=void 0},triggerRefetch:u,broadcastSessionUpdate:e=>{eU().post({event:"session",data:{trigger:e},clientId:Math.random().toString(36).substring(7)})}}}({sessionAtom:o,sessionSignal:r,$fetch:h,options:e});return t.init(),()=>{t.cleanup()}}),{session:o,$sessionSignal:r}),g=e?.plugins||[],b={},y={$sessionSignal:v,session:m},w={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},E=[{signal:"$sessionSignal",matcher:e=>"/sign-out"===e||"/update-user"===e||"/sign-up/email"===e||"/sign-in/email"===e||"/delete-user"===e||"/verify-email"===e||"/revoke-sessions"===e||"/revoke-session"===e||"/change-email"===e}];for(let e of g)e.getAtoms&&Object.assign(y,e.getAtoms?.(h)),e.pathMethods&&Object.assign(w,e.pathMethods),e.atomListeners&&E.push(...e.atomListeners);let R={notify:e=>{y[e].set(!y[e].get())},listen:(e,t)=>{y[e].subscribe(t)},atoms:y};for(let t of g)t.getActions&&Object.assign(b,t.getActions?.(h,R,e));return{get baseURL(){return i},pluginsActions:b,pluginsAtoms:y,pluginPathMethods:w,atomListeners:E,$fetch:h,$store:R}})(e),c={};for(let[e,t]of Object.entries(i)){c[`use${(n=e).charAt(0).toUpperCase()+n.slice(1)}`]=()=>(function(e,t={}){let n=(0,r.useRef)(e.get()),{keys:o,deps:s=[e,o]}=t,i=(0,r.useCallback)(t=>{let r=e=>{n.current!==e&&(n.current=e,t())};if(r(e.value),o?.length){let t;return t=new Set(o).add(void 0),e.listen((e,n,o)=>{t.has(o)&&r(e,n,o)})}return e.listen(r)},s),a=()=>n.current;return(0,r.useSyncExternalStore)(i,a,a)})(t)}return t={...s,...c,$fetch:a,$store:l},function e(n=[]){return new Proxy(function(){},{get(r,o){var s;if("string"!=typeof o||"then"===o||"catch"===o||"finally"===o)return;let i=[...n,o],a=t;for(let e of i)if(a&&"object"==typeof a&&e in a)a=a[e];else{a=void 0;break}return"function"==typeof a?a:"object"==typeof(s=a)&&null!==s&&"get"in s&&"function"==typeof s.get&&"lc"in s&&"number"==typeof s.lc?a:e(i)},apply:async(e,t,r)=>{let s="/"+n.map(e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)).join("/"),l=r[0]||{},c=r[1]||{},{query:d,fetchOptions:f,...p}=l,h={...c,...f},v=function(e,t,n){let r=t[e],{fetchOptions:o,query:s,...i}=n||{};return r||(o?.method?o.method:i&&Object.keys(i).length>0?"POST":"GET")}(s,o,l);return await a(s,{...h,body:"GET"===v?void 0:{...p,...h?.body||{}},query:d||h?.query,method:v,async onSuccess(e){if(await h?.onSuccess?.(e),!u||h.disableSignal)return;let t=u.filter(e=>e.matcher(s));if(t.length)for(let e of t){let t=i[e.signal];if(!t)return;let n=t.get();setTimeout(()=>{t.set(!n)},10)}}})}})}()}({baseURL:P.default.env.NEXT_PUBLIC_SITE_URL}),eF=x.object({email:x.string().email({message:"Invalid email address"}),password:x.string().min(8,{message:"Password must be at least 8 characters"})}),eq=x.object({name:x.string().max(20),email:x.string().email({message:"Invalid email address"}),password:x.string().min(8,{message:"Password must be at least 8 characters"}),confirmPassword:x.string().min(8,{message:"Password must be at least 8 characters"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function eH(){return async e=>{let t;eF.parse(e),await ek.signIn.email({email:e.email,password:e.password,callbackURL:"/dashboard"},{onRequest:e=>{t=U.toast.loading("Connection...")},onSuccess:async e=>{t&&U.toast.dismiss(t)},onError:e=>{U.toast.dismiss(t),U.toast.error(e.error.message)}})}}async function eG(){await ek.signOut({fetchOptions:{onSuccess:()=>{window.location.href="/"},onError:e=>{U.toast.error(e.error.message)}}})}function eW(){return async e=>{let t;eq.parse(e),await ek.signUp.email({name:e.name,email:e.email,password:e.password,callbackURL:"/dashboard"},{onRequest:()=>{t=U.toast.loading("Connection...")},onSuccess:async()=>{t&&U.toast.dismiss(t)},onError:e=>{U.toast.dismiss(t),U.toast.error(e.error.message)}})}}e.s(["SignOut",()=>eG,"signinSchema",0,eF,"signupSchema",0,eq,"useSignIn",()=>eH,"useSignUp",()=>eW],39541)}]);