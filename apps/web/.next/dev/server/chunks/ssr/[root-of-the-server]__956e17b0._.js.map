{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/api_service/index.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || (typeof window !== 'undefined' ? '/api' : 'https://solopreneur.sethylaleye.com/api');\nexport interface RequestOptions extends Omit<RequestInit, 'body'> {\n    data?: any;\n}\n\nexport interface APIResponse<T> {\n    data: T | null;\n    error: string | null;\n}\n\nexport const request = async <T = any>(\n    endpoint: string,\n    options: RequestOptions = {}\n): Promise<APIResponse<T>> => {\n    const { method, data, headers, ...rest } = options;\n    const url = `${API_BASE_URL}${endpoint}`;\n\n    const config: RequestInit = {\n        method,\n        credentials: \"include\",\n        headers: {\n            'Content-Type': 'application/json',\n            ...headers,\n        },\n        ...rest,\n    };\n\n    if (data && method !== 'GET') {\n        config.body = JSON.stringify(data);\n    }\n\n    try {\n        const response = await fetch(url, config);\n\n\n        if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}));\n            throw new Error(errorData.message || `HTTP error! Status: ${response.status}`);\n        }\n\n        if (response.status === 204) {\n            return {} as APIResponse<T>;\n        }\n        const finalData = await response.json();\n\n        return finalData as APIResponse<T>;\n    } catch (error) {\n        console.error(\"API Request Failed:\", error);\n        throw error;\n    }\n};"],"names":[],"mappings":";;;;AAAA,MAAM,eAAe,iEAAwC,CAAC,sCAAgC,0BAAS,yCAAyC;AAUzI,MAAM,UAAU,OACnB,UACA,UAA0B,CAAC,CAAC;IAE5B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,MAAM,GAAG;IAC3C,MAAM,MAAM,GAAG,eAAe,UAAU;IAExC,MAAM,SAAsB;QACxB;QACA,aAAa;QACb,SAAS;YACL,gBAAgB;YAChB,GAAG,OAAO;QACd;QACA,GAAG,IAAI;IACX;IAEA,IAAI,QAAQ,WAAW,OAAO;QAC1B,OAAO,IAAI,GAAG,KAAK,SAAS,CAAC;IACjC;IAEA,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,KAAK;QAGlC,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACvD,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;QACjF;QAEA,IAAI,SAAS,MAAM,KAAK,KAAK;YACzB,OAAO,CAAC;QACZ;QACA,MAAM,YAAY,MAAM,SAAS,IAAI;QAErC,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM;IACV;AACJ"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/lib/use-cases/clients.ts"],"sourcesContent":["import { ClientSchema } from \"@/lib/validators/clients\";\nimport { type InferSelectModel } from 'drizzle-orm';\nimport { clients } from '@/lib/db/schema';\nimport { request } from '@/api_service';\n\nexport type Client = InferSelectModel<typeof clients>;\n\nexport async function getClients(): Promise<Client[]> {\n    const res = await request<Client[]>('/clients');\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    return res.data || [];\n}\n\nexport async function getClient(id: string): Promise<Client> {\n    const res = await request<Client>(`/clients/${id}`);\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Client not found');\n    }\n    return res.data;\n}\n\nexport async function createClient(data: ClientSchema): Promise<Client> {\n    const res = await request<Client>('/clients', {\n        method: 'POST',\n        data,\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Failed to create client');\n    }\n    return res.data;\n}\n\nexport async function updateClient(id: string, data: ClientSchema): Promise<Client> {\n    const res = await request<Client>(`/clients/${id}`, {\n        method: 'PATCH',\n        data,\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Failed to update client');\n    }\n    return res.data;\n}\n\nexport async function deleteClient(id?: string): Promise<void> {\n    if (!id) return;\n    const res = await request<null>(`/clients/${id}`, {\n        method: 'DELETE',\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAGA;;AAIO,eAAe;IAClB,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAW;IACpC,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,OAAO,IAAI,IAAI,IAAI,EAAE;AACzB;AAEO,eAAe,UAAU,EAAU;IACtC,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAS,CAAC,SAAS,EAAE,IAAI;IAClD,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,aAAa,IAAkB;IACjD,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAS,YAAY;QAC1C,QAAQ;QACR;IACJ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,aAAa,EAAU,EAAE,IAAkB;IAC7D,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAS,CAAC,SAAS,EAAE,IAAI,EAAE;QAChD,QAAQ;QACR;IACJ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,aAAa,EAAW;IAC1C,IAAI,CAAC,IAAI;IACT,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAO,CAAC,SAAS,EAAE,IAAI,EAAE;QAC9C,QAAQ;IACZ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;AACJ"}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/hooks/use-clients.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { getClients, getClient, createClient, updateClient, deleteClient } from '@/lib/use-cases/clients';\nimport { ClientSchema } from '@/lib/validators/clients';\n\nexport function useClients() {\n    return useQuery({\n        queryKey: ['clients'],\n        queryFn: getClients,\n    });\n}\n\nexport function useClient(id: string) {\n    return useQuery({\n        queryKey: ['client', id],\n        queryFn: () => getClient(id),\n        enabled: !!id,\n    });\n}\n\nexport function useCreateClient() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (data: ClientSchema) => createClient(data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['clients'] });\n        },\n    });\n}\n\nexport function useUpdateClient(id: string) {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (data: ClientSchema) => updateClient(id, data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['clients'] });\n            queryClient.invalidateQueries({ queryKey: ['client', id] });\n        },\n    });\n}\n\nexport function useDeleteClient(id?: string) {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: () => deleteClient(id),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['clients'] });\n            queryClient.invalidateQueries({ queryKey: ['client', id] });\n        },\n    });\n}"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;;;AAGO,SAAS;IACZ,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;SAAU;QACrB,SAAS,uMAAU;IACvB;AACJ;AAEO,SAAS,UAAU,EAAU;IAChC,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;YAAU;SAAG;QACxB,SAAS,IAAM,IAAA,sMAAS,EAAC;QACzB,SAAS,CAAC,CAAC;IACf;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAAuB,IAAA,yMAAY,EAAC;QACjD,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;QAC1D;IACJ;AACJ;AAEO,SAAS,gBAAgB,EAAU;IACtC,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAAuB,IAAA,yMAAY,EAAC,IAAI;QACrD,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;YACtD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAU;iBAAG;YAAC;QAC7D;IACJ;AACJ;AAEO,SAAS,gBAAgB,EAAW;IACvC,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,IAAM,IAAA,yMAAY,EAAC;QAC/B,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;YACtD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAU;iBAAG;YAAC;QAC7D;IACJ;AACJ"}},
    {"offset": {"line": 205, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/lib/use-cases/devis.ts"],"sourcesContent":["import { DevisSchema } from \"@/lib/validators/devis\";\nimport { type InferSelectModel } from 'drizzle-orm';\nimport { devis, devisItems } from '@/lib/db/schema';\nimport { request } from '@/api_service';\n\nexport type Devis = InferSelectModel<typeof devis>;\nexport type DevisItem = InferSelectModel<typeof devisItems>;\n\nexport type DevisWithItems = Devis & { items: DevisItem[]; clientName: string | null };\n\nexport async function getDevisList(): Promise<DevisWithItems[]> {\n    const res = await request<DevisWithItems[]>('/devis');\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Devis not found');\n    }\n    return res.data;\n}\n\nexport async function getDevis(id: string): Promise<Devis> {\n    const res = await request<Devis>(`/devis/${id}`);\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Devis not found');\n    }\n    return res.data;\n}\n\nexport async function createDevis(data: DevisSchema): Promise<Devis> {\n    const res = await request<Devis>('/devis', {\n        method: 'POST',\n        data,\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Failed to create devis');\n    }\n    return res.data;\n}\n\nexport async function updateDevis(id: string, data: DevisSchema): Promise<Devis> {\n    const res = await request<Devis>(`/devis/${id}`, {\n        method: 'PATCH',\n        data,\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Failed to update devis');\n    }\n    return res.data;\n}\n\nexport async function deleteDevis(id: string): Promise<void> {\n    const res = await request<null>(`/devis/${id}`, {\n        method: 'DELETE',\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAGA;;AAOO,eAAe;IAClB,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAmB;IAC5C,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,SAAS,EAAU;IACrC,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAQ,CAAC,OAAO,EAAE,IAAI;IAC/C,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,YAAY,IAAiB;IAC/C,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAQ,UAAU;QACvC,QAAQ;QACR;IACJ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,YAAY,EAAU,EAAE,IAAiB;IAC3D,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAQ,CAAC,OAAO,EAAE,IAAI,EAAE;QAC7C,QAAQ;QACR;IACJ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,YAAY,EAAU;IACxC,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAO,CAAC,OAAO,EAAE,IAAI,EAAE;QAC5C,QAAQ;IACZ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;AACJ"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/hooks/use-devis.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { getDevisList, getDevis, createDevis, updateDevis, deleteDevis } from '@/lib/use-cases/devis';\nimport { DevisSchema } from '@/lib/validators/devis';\n\nexport function useDevisList() {\n    return useQuery({\n        queryKey: ['devis'],\n        queryFn: getDevisList,\n    });\n}\n\nexport function useDevis(id: string) {\n    return useQuery({\n        queryKey: ['devis', id],\n        queryFn: () => getDevis(id),\n        enabled: !!id,\n    });\n}\n\nexport function useCreateDevis() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (data: DevisSchema) => createDevis(data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['devis'] });\n        },\n    });\n}\n\nexport function useUpdateDevis(id: string) {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (data: DevisSchema) => updateDevis(id, data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['devis'] });\n            queryClient.invalidateQueries({ queryKey: ['devis', id] });\n        },\n    });\n}\n\nexport function useDeleteDevis() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (id: string) => deleteDevis(id),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['devis'] });\n        },\n    });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;;;AAGO,SAAS;IACZ,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;SAAQ;QACnB,SAAS,uMAAY;IACzB;AACJ;AAEO,SAAS,SAAS,EAAU;IAC/B,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;YAAS;SAAG;QACvB,SAAS,IAAM,IAAA,mMAAQ,EAAC;QACxB,SAAS,CAAC,CAAC;IACf;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAAsB,IAAA,sMAAW,EAAC;QAC/C,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAQ;YAAC;QACxD;IACJ;AACJ;AAEO,SAAS,eAAe,EAAU;IACrC,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAAsB,IAAA,sMAAW,EAAC,IAAI;QACnD,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAQ;YAAC;YACpD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAS;iBAAG;YAAC;QAC5D;IACJ;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,KAAe,IAAA,sMAAW,EAAC;QACxC,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAQ;YAAC;QACxD;IACJ;AACJ"}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/lib/use-cases/factures.ts"],"sourcesContent":["import { FactureSchema } from \"@/lib/validators/factures\";\nimport { type InferSelectModel } from 'drizzle-orm';\nimport { factures, facturesItems } from '@/lib/db/schema';\nimport { request } from '@/api_service';\n\nexport type Facture = InferSelectModel<typeof factures>;\nexport type FactureItem = InferSelectModel<typeof facturesItems>;\nexport type FactureWithItems = Facture & { items: FactureItem[]; clientName: string | null, devisId: string | null };\n\nexport async function getFacturesList(): Promise<FactureWithItems[]> {\n    const res = await request<FactureWithItems[]>('/factures');\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    return res.data || [];\n}\n\nexport async function getFacture(id: string): Promise<Facture> {\n    const res = await request<Facture>(`/factures/${id}`);\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Facture not found');\n    }\n    return res.data;\n}\n\nexport async function createFacture(data: FactureSchema): Promise<Facture> {\n    const res = await request<Facture>('/factures', {\n        method: 'POST',\n        data,\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Failed to create facture');\n    }\n    return res.data;\n}\n\nexport async function updateFacture(id: string, data: FactureSchema): Promise<Facture> {\n    const res = await request<Facture>(`/factures/${id}`, {\n        method: 'PATCH',\n        data,\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Failed to update facture');\n    }\n    return res.data;\n}\n\nexport async function deleteFacture(id: string): Promise<void> {\n    const res = await request<null>(`/factures/${id}`, {\n        method: 'DELETE',\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAGA;;AAMO,eAAe;IAClB,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAqB;IAC9C,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,OAAO,IAAI,IAAI,IAAI,EAAE;AACzB;AAEO,eAAe,WAAW,EAAU;IACvC,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAU,CAAC,UAAU,EAAE,IAAI;IACpD,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,cAAc,IAAmB;IACnD,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAU,aAAa;QAC5C,QAAQ;QACR;IACJ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,cAAc,EAAU,EAAE,IAAmB;IAC/D,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAU,CAAC,UAAU,EAAE,IAAI,EAAE;QAClD,QAAQ;QACR;IACJ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,IAAI,CAAC,IAAI,IAAI,EAAE;QACX,MAAM,IAAI,MAAM;IACpB;IACA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,cAAc,EAAU;IAC1C,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAO,CAAC,UAAU,EAAE,IAAI,EAAE;QAC/C,QAAQ;IACZ;IAEA,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;AACJ"}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/hooks/use-factures.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { getFacturesList, getFacture, createFacture, updateFacture, deleteFacture } from '@/lib/use-cases/factures';\nimport { FactureSchema } from '@/lib/validators/factures';\nimport { useRouter } from 'next/navigation';\n\nexport function useFacturesList() {\n    return useQuery({\n        queryKey: ['factures'],\n        queryFn: getFacturesList,\n    });\n}\n\nexport function useFacture(id: string) {\n    return useQuery({\n        queryKey: ['facture', id],\n        queryFn: () => getFacture(id),\n        enabled: !!id,\n    });\n}\n\nexport function useCreateFacture() {\n    const queryClient = useQueryClient();\n    const router = useRouter();\n\n    return useMutation({\n        mutationFn: (data: FactureSchema) => createFacture(data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['factures'] });\n            router.push('/factures');\n            router.refresh();\n        },\n    });\n}\n\nexport function useUpdateFacture(id: string) {\n    const queryClient = useQueryClient();\n    const router = useRouter();\n\n    return useMutation({\n        mutationFn: (data: FactureSchema) => updateFacture(id, data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['factures'] });\n            queryClient.invalidateQueries({ queryKey: ['facture', id] });\n            router.push('/factures');\n            router.refresh();\n        },\n    });\n}\n\nexport function useDeleteFacture() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (id: string) => deleteFacture(id),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['factures'] });\n        },\n    });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;AAEA;;;;AAEO,SAAS;IACZ,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;SAAW;QACtB,SAAS,6MAAe;IAC5B;AACJ;AAEO,SAAS,WAAW,EAAU;IACjC,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;YAAW;SAAG;QACzB,SAAS,IAAM,IAAA,wMAAU,EAAC;QAC1B,SAAS,CAAC,CAAC;IACf;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAClC,MAAM,SAAS,IAAA,2LAAS;IAExB,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAAwB,IAAA,2MAAa,EAAC;QACnD,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;YACvD,OAAO,IAAI,CAAC;YACZ,OAAO,OAAO;QAClB;IACJ;AACJ;AAEO,SAAS,iBAAiB,EAAU;IACvC,MAAM,cAAc,IAAA,oPAAc;IAClC,MAAM,SAAS,IAAA,2LAAS;IAExB,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAAwB,IAAA,2MAAa,EAAC,IAAI;QACvD,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;YACvD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAW;iBAAG;YAAC;YAC1D,OAAO,IAAI,CAAC;YACZ,OAAO,OAAO;QAClB;IACJ;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,KAAe,IAAA,2MAAa,EAAC;QAC1C,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;QAC3D;IACJ;AACJ"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/lib/use-cases/recettes.ts"],"sourcesContent":["import { type InferSelectModel } from 'drizzle-orm';\nimport { recettes } from '@/lib/db/schema';\nimport { request } from '@/api_service';\n\nexport type Recette = InferSelectModel<typeof recettes>;\nexport type RecetteWithClientAndFacture = Recette & {\n    clientName: string;\n    factureNumber: string;\n}\n\nexport async function getRecettesList() {\n    const res = await request<RecetteWithClientAndFacture[]>(\"/recettes\");\n    console.log('res', res)\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    return res.data\n}\n"],"names":[],"mappings":";;;;AAEA;;AAQO,eAAe;IAClB,MAAM,MAAM,MAAM,IAAA,0LAAO,EAAgC;IACzD,QAAQ,GAAG,CAAC,OAAO;IACnB,IAAI,IAAI,KAAK,EAAE;QACX,MAAM,IAAI,MAAM,IAAI,KAAK;IAC7B;IACA,OAAO,IAAI,IAAI;AACnB"}},
    {"offset": {"line": 560, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/hooks/use-recettes.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\nimport { getRecettesList } from '@/lib/use-cases/recettes';\n\nexport function useRecettesList() {\n    return useQuery({\n        queryKey: ['recettes'],\n        queryFn: getRecettesList,\n    });\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IACZ,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;SAAW;QACtB,SAAS,6MAAe;IAC5B;AACJ"}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n    <div\n        ref={ref}\n        className={cn(\n            \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n            className\n        )}\n        {...props}\n    />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n    <div\n        ref={ref}\n        className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n        {...props}\n    />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n    <div\n        ref={ref}\n        className={cn(\n            \"text-2xl font-semibold leading-none tracking-tight\",\n            className\n        )}\n        {...props}\n    />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n    <div\n        ref={ref}\n        className={cn(\"text-sm text-muted-foreground\", className)}\n        {...props}\n    />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n    <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n    HTMLDivElement,\n    React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n    <div\n        ref={ref}\n        className={cn(\"flex items-center p-6 pt-0\", className)}\n        {...props}\n    />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,+PAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EACT,4DACA;QAEH,GAAG,KAAK;;;;;;AAGjB,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,+PAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGjB,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,+PAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EACT,sDACA;QAEH,GAAG,KAAK;;;;;;AAGjB,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,+PAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGjB,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,+PAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QAAI,KAAK;QAAK,WAAW,IAAA,6KAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAElE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,+PAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGjB,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 665, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/components/dashboard/stats-card.tsx"],"sourcesContent":["'use client';\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { LucideIcon } from 'lucide-react';\n\ninterface StatsCardProps {\n    title: string;\n    value: string | number;\n    description?: string;\n    icon: LucideIcon;\n    trend?: {\n        value: number;\n        isPositive: boolean;\n    };\n}\n\nexport function StatsCard({ title, value, description, icon: Icon, trend }: StatsCardProps) {\n    return (\n        <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">{title}</CardTitle>\n                <Icon className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n                <div className=\"text-2xl font-bold\">{value}</div>\n                {description && (\n                    <p className=\"text-xs text-muted-foreground mt-1\">{description}</p>\n                )}\n                {trend && (\n                    <p className={`text-xs mt-1 ${trend.isPositive ? 'text-green-600' : 'text-red-600'}`}>\n                        {trend.isPositive ? '+' : ''}{trend.value}% par rapport au mois dernier\n                    </p>\n                )}\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAgBO,SAAS,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,IAAI,EAAE,KAAK,EAAkB;IACtF,qBACI,0RAAC,4LAAI;;0BACD,0RAAC,kMAAU;gBAAC,WAAU;;kCAClB,0RAAC,iMAAS;wBAAC,WAAU;kCAAuB;;;;;;kCAC5C,0RAAC;wBAAK,WAAU;;;;;;;;;;;;0BAEpB,0RAAC,mMAAW;;kCACR,0RAAC;wBAAI,WAAU;kCAAsB;;;;;;oBACpC,6BACG,0RAAC;wBAAE,WAAU;kCAAsC;;;;;;oBAEtD,uBACG,0RAAC;wBAAE,WAAW,CAAC,aAAa,EAAE,MAAM,UAAU,GAAG,mBAAmB,gBAAgB;;4BAC/E,MAAM,UAAU,GAAG,MAAM;4BAAI,MAAM,KAAK;4BAAC;;;;;;;;;;;;;;;;;;;AAMlE"}},
    {"offset": {"line": 748, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/components/dashboard/revenue-chart.tsx"],"sourcesContent":["'use client';\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { useMemo } from 'react';\n// Assuming Recette and StripeStats are defined elsewhere\n// Note: StripeStats structure is defined implicitly by the API response\n// and is represented by the array of accounts containing 'monthlyAnalytics'.\n\n// Define the expected type structure for the Recette item\ninterface Recette {\n    date: string; // ISO date string\n    amount: number; // Use amount instead of total for consistency with original logic\n}\n\n// Define the expected type structure for a single month of Stripe Analytics\ninterface MonthlyAnalytic {\n    monthKey: string; // e.g., '2025-11'\n    endingMRR: number; // The MRR at the end of that month\n}\n\n// Define the expected type structure for StripeStats (the account item)\ninterface StripeStats {\n    accountId: string;\n    accountName: string;\n    monthlyAnalytics: MonthlyAnalytic[];\n    currentSnapshot: { mrr: number; arr: number; activeCustomers: number };\n}\n\ninterface RevenueChartProps {\n    recettes: Recette[];\n    stripeStats?: StripeStats[]; // Accepts the array of accounts from the new API\n}\n\n// --- Component ---\n\nexport function RevenueChart({ recettes, stripeStats }: RevenueChartProps) {\n\n    const monthlyData = useMemo(() => {\n        const today = new Date();\n        const dataLength = 12;\n\n        // 1. Initialize data structure for the last 12 months\n        // The index represents the offset from the current month (0 = current month, 11 = 11 months ago)\n        const initializedMonths = Array.from({ length: dataLength }, (_, i) => {\n            const date = new Date(today);\n            // Go back 11 months for the first item, up to 0 months for the last item (current month)\n            date.setMonth(today.getMonth() - (dataLength - 1 - i));\n\n            return {\n                // Key for easy lookup, e.g., '2025-11'\n                key: date.getFullYear() + '-' + String(date.getMonth() + 1).padStart(2, '0'),\n                // Display label, e.g., 'Nov.'\n                monthLabel: date.toLocaleDateString('fr-FR', { month: 'short' }),\n                revenue: 0, // Non-recurring revenue\n                mrr: 0,     // Recurring revenue\n                total: 0,   // Revenue + MRR\n            };\n        });\n\n        const dataMap = new Map(initializedMonths.map(item => [item.key, item]));\n\n        // 2. Aggregate Non-Recurring Revenue (Recettes)\n        recettes.forEach((recette) => {\n            const date = new Date(recette.date);\n            const key = date.getFullYear() + '-' + String(date.getMonth() + 1).padStart(2, '0');\n\n            if (dataMap.has(key)) {\n                const monthData = dataMap.get(key)!;\n                monthData.revenue += Number(recette.amount);\n                monthData.total += Number(recette.amount);\n            }\n        });\n\n        // 3. Aggregate Recurring Revenue (MRR) from Stripe Analytics\n        stripeStats?.forEach((accountStat) => {\n            accountStat.monthlyAnalytics.forEach((analytics) => {\n                const key = analytics.monthKey; // Already in 'YYYY-MM' format from API\n\n                if (dataMap.has(key)) {\n                    const monthData = dataMap.get(key)!;\n                    monthData.mrr += analytics.endingMRR;\n                    // Add MRR to the total revenue for the chart\n                    monthData.total += analytics.endingMRR;\n                }\n            });\n        });\n\n        // Convert Map back to an array in chronological order\n        return Array.from(dataMap.values());\n\n    }, [recettes, stripeStats]);\n\n    // Calculate max revenue after aggregation for scaling the bars\n    const maxRevenue = Math.max(...monthlyData.map(m => m.total), 1000); // Ensure min height for scaling\n\n    return (\n        <Card className=\"col-span-4 md:col-span-7\"> {/* Increased span for better visibility */}\n            <CardHeader>\n                <CardTitle>Évolution du Chiffre d'Affaires Total (CA + MRR)</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <div className=\"h-[300px] flex items-end justify-between gap-4\">\n                    {monthlyData.map((data, index) => (\n                        <div key={data.key} className=\"flex-1 flex flex-col items-center gap-2\">\n                            {/* Bar visualization */}\n                            <div\n                                className=\"w-full bg-primary rounded-t relative transition-all duration-300\"\n                                style={{\n                                    height: `${(data.total / maxRevenue) * 100}%`,\n                                    minHeight: data.total > 0 ? '4px' : '0px'\n                                }}\n                            >\n                                {/* Display Value */}\n                                <div className=\"absolute -top-6 left-0 right-0 text-center text-xs font-medium\">\n                                    {data.total > 0 ? `${(data.total / 1000).toFixed(1)}k` : ''}\n                                </div>\n                            </div>\n                            {/* Month Label */}\n                            <span className=\"text-xs text-muted-foreground capitalize\">{data.monthLabel}</span>\n                        </div>\n                    ))}\n                </div>\n            </CardContent>\n        </Card>\n    );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAmCO,SAAS,aAAa,EAAE,QAAQ,EAAE,WAAW,EAAqB;IAErE,MAAM,cAAc,IAAA,4PAAO,EAAC;QACxB,MAAM,QAAQ,IAAI;QAClB,MAAM,aAAa;QAEnB,sDAAsD;QACtD,iGAAiG;QACjG,MAAM,oBAAoB,MAAM,IAAI,CAAC;YAAE,QAAQ;QAAW,GAAG,CAAC,GAAG;YAC7D,MAAM,OAAO,IAAI,KAAK;YACtB,yFAAyF;YACzF,KAAK,QAAQ,CAAC,MAAM,QAAQ,KAAK,CAAC,aAAa,IAAI,CAAC;YAEpD,OAAO;gBACH,uCAAuC;gBACvC,KAAK,KAAK,WAAW,KAAK,MAAM,OAAO,KAAK,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;gBACxE,8BAA8B;gBAC9B,YAAY,KAAK,kBAAkB,CAAC,SAAS;oBAAE,OAAO;gBAAQ;gBAC9D,SAAS;gBACT,KAAK;gBACL,OAAO;YACX;QACJ;QAEA,MAAM,UAAU,IAAI,IAAI,kBAAkB,GAAG,CAAC,CAAA,OAAQ;gBAAC,KAAK,GAAG;gBAAE;aAAK;QAEtE,gDAAgD;QAChD,SAAS,OAAO,CAAC,CAAC;YACd,MAAM,OAAO,IAAI,KAAK,QAAQ,IAAI;YAClC,MAAM,MAAM,KAAK,WAAW,KAAK,MAAM,OAAO,KAAK,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;YAE/E,IAAI,QAAQ,GAAG,CAAC,MAAM;gBAClB,MAAM,YAAY,QAAQ,GAAG,CAAC;gBAC9B,UAAU,OAAO,IAAI,OAAO,QAAQ,MAAM;gBAC1C,UAAU,KAAK,IAAI,OAAO,QAAQ,MAAM;YAC5C;QACJ;QAEA,6DAA6D;QAC7D,aAAa,QAAQ,CAAC;YAClB,YAAY,gBAAgB,CAAC,OAAO,CAAC,CAAC;gBAClC,MAAM,MAAM,UAAU,QAAQ,EAAE,uCAAuC;gBAEvE,IAAI,QAAQ,GAAG,CAAC,MAAM;oBAClB,MAAM,YAAY,QAAQ,GAAG,CAAC;oBAC9B,UAAU,GAAG,IAAI,UAAU,SAAS;oBACpC,6CAA6C;oBAC7C,UAAU,KAAK,IAAI,UAAU,SAAS;gBAC1C;YACJ;QACJ;QAEA,sDAAsD;QACtD,OAAO,MAAM,IAAI,CAAC,QAAQ,MAAM;IAEpC,GAAG;QAAC;QAAU;KAAY;IAE1B,+DAA+D;IAC/D,MAAM,aAAa,KAAK,GAAG,IAAI,YAAY,GAAG,CAAC,CAAA,IAAK,EAAE,KAAK,GAAG,OAAO,gCAAgC;IAErG,qBACI,0RAAC,4LAAI;QAAC,WAAU;;YAA2B;0BACvC,0RAAC,kMAAU;0BACP,cAAA,0RAAC,iMAAS;8BAAC;;;;;;;;;;;0BAEf,0RAAC,mMAAW;0BACR,cAAA,0RAAC;oBAAI,WAAU;8BACV,YAAY,GAAG,CAAC,CAAC,MAAM,sBACpB,0RAAC;4BAAmB,WAAU;;8CAE1B,0RAAC;oCACG,WAAU;oCACV,OAAO;wCACH,QAAQ,GAAG,AAAC,KAAK,KAAK,GAAG,aAAc,IAAI,CAAC,CAAC;wCAC7C,WAAW,KAAK,KAAK,GAAG,IAAI,QAAQ;oCACxC;8CAGA,cAAA,0RAAC;wCAAI,WAAU;kDACV,KAAK,KAAK,GAAG,IAAI,GAAG,CAAC,KAAK,KAAK,GAAG,IAAI,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;;;;;;;;;;;8CAIjE,0RAAC;oCAAK,WAAU;8CAA4C,KAAK,UAAU;;;;;;;2BAfrE,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;AAsB1C"}},
    {"offset": {"line": 894, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/components/dashboard/recent-activity.tsx"],"sourcesContent":["'use client';\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Facture } from '@/lib/use-cases/factures';\nimport { format } from 'date-fns';\nimport { fr } from 'date-fns/locale';\n\ninterface RecentActivityProps {\n    factures: Facture[];\n}\n\nexport function RecentActivity({ factures }: RecentActivityProps) {\n    const recentFactures = factures.slice(0, 5);\n\n    const getStatusColor = (status: string) => {\n        switch (status) {\n            case 'pending': return 'bg-yellow-100 text-yellow-800';\n            case 'paid': return 'bg-green-100 text-green-800';\n            case 'cancelled': return 'bg-red-100 text-red-800';\n            default: return 'bg-gray-100 text-gray-800';\n        }\n    };\n\n    const getStatusLabel = (status: string) => {\n        switch (status) {\n            case 'pending': return 'En attente';\n            case 'paid': return 'Payée';\n            case 'cancelled': return 'Annulée';\n            default: return status;\n        }\n    };\n\n    return (\n        <Card className=\"col-span-3\">\n            <CardHeader>\n                <CardTitle>Factures Récentes</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <div className=\"space-y-4\">\n                    {recentFactures.map((facture, index) => (\n                        <div key={index} className=\"flex items-center justify-between\">\n                            <div className=\"flex-1\">\n                                <p className=\"text-sm font-medium\">{facture.number}</p>\n                                <p className=\"text-xs text-muted-foreground\">\n                                    {format(new Date(facture.date), 'dd MMMM yyyy', { locale: fr })}\n                                </p>\n                            </div>\n                            <div className=\"flex items-center gap-3\">\n                                <span className=\"text-sm font-medium\">\n                                    {Number(facture.total).toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' })}\n                                </span>\n                                <span className={`px-2 py-1 rounded-full text-xs font-semibold ${getStatusColor(facture.status)}`}>\n                                    {getStatusLabel(facture.status)}\n                                </span>\n                            </div>\n                        </div>\n                    ))}\n                    {recentFactures.length === 0 && (\n                        <p className=\"text-sm text-muted-foreground text-center py-4\">\n                            Aucune facture récente\n                        </p>\n                    )}\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AALA;;;;;AAWO,SAAS,eAAe,EAAE,QAAQ,EAAuB;IAC5D,MAAM,iBAAiB,SAAS,KAAK,CAAC,GAAG;IAEzC,MAAM,iBAAiB,CAAC;QACpB,OAAQ;YACJ,KAAK;gBAAW,OAAO;YACvB,KAAK;gBAAQ,OAAO;YACpB,KAAK;gBAAa,OAAO;YACzB;gBAAS,OAAO;QACpB;IACJ;IAEA,MAAM,iBAAiB,CAAC;QACpB,OAAQ;YACJ,KAAK;gBAAW,OAAO;YACvB,KAAK;gBAAQ,OAAO;YACpB,KAAK;gBAAa,OAAO;YACzB;gBAAS,OAAO;QACpB;IACJ;IAEA,qBACI,0RAAC,4LAAI;QAAC,WAAU;;0BACZ,0RAAC,kMAAU;0BACP,cAAA,0RAAC,iMAAS;8BAAC;;;;;;;;;;;0BAEf,0RAAC,mMAAW;0BACR,cAAA,0RAAC;oBAAI,WAAU;;wBACV,eAAe,GAAG,CAAC,CAAC,SAAS,sBAC1B,0RAAC;gCAAgB,WAAU;;kDACvB,0RAAC;wCAAI,WAAU;;0DACX,0RAAC;gDAAE,WAAU;0DAAuB,QAAQ,MAAM;;;;;;0DAClD,0RAAC;gDAAE,WAAU;0DACR,IAAA,2MAAM,EAAC,IAAI,KAAK,QAAQ,IAAI,GAAG,gBAAgB;oDAAE,QAAQ,6LAAE;gDAAC;;;;;;;;;;;;kDAGrE,0RAAC;wCAAI,WAAU;;0DACX,0RAAC;gDAAK,WAAU;0DACX,OAAO,QAAQ,KAAK,EAAE,cAAc,CAAC,SAAS;oDAAE,OAAO;oDAAY,UAAU;gDAAM;;;;;;0DAExF,0RAAC;gDAAK,WAAW,CAAC,6CAA6C,EAAE,eAAe,QAAQ,MAAM,GAAG;0DAC5F,eAAe,QAAQ,MAAM;;;;;;;;;;;;;+BAZhC;;;;;wBAiBb,eAAe,MAAM,KAAK,mBACvB,0RAAC;4BAAE,WAAU;sCAAiD;;;;;;;;;;;;;;;;;;;;;;;AAQtF"}},
    {"offset": {"line": 1047, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/lib/use-cases/stripe.ts"],"sourcesContent":["import { type InferSelectModel } from 'drizzle-orm';\nimport { stripeAccounts, products } from '@/lib/db/schema';\nimport { StripeAccountSchema } from '@/lib/validators/stripe';\nimport { request } from '@/api_service';\nimport { StripeStats } from '@/types/stripe';\n\nexport type StripeAccount = InferSelectModel<typeof stripeAccounts>;\nexport type Product = InferSelectModel<typeof products>;\n\nexport async function getStripeAccounts() {\n    const { data, error } = await request<StripeAccount[]>('/stripe/accounts', {\n        method: \"GET\"\n    })\n    if (error) throw new Error(error)\n    return data;\n}\n\nexport async function getStripeAccount(id: string): Promise<StripeAccount> {\n    const { data, error } = await request<StripeAccount>(`/stripe/accounts/${id}`, {\n        method: \"GET\"\n    })\n    console.log('stripe stats : ', { data, error })\n    if (error) throw new Error(error)\n    if (!data) throw new Error('Account not found')\n    return data;\n}\n\nexport async function getStripeStats() {\n    const { data, error } = await request<StripeStats>(`/stripe/stats?force_refresh=true`, {\n        method: \"GET\",\n    });\n    if (error) throw new Error(error)\n    if (!data) throw new Error('Stats not found')\n    return data;\n}\n\nexport async function createStripeAccount(data: StripeAccountSchema): Promise<StripeAccount> {\n    const { data: res, error } = await request<StripeAccount>(`/stripe/accounts`, {\n        method: 'POST',\n        data\n    });\n    if (error) throw new Error(error)\n    if (!res) throw new Error('Failed to create account')\n    return res;\n}\n\nexport async function updateStripeAccount(id: string, data: Partial<StripeAccountSchema>): Promise<StripeAccount> {\n    const { data: res, error } = await request<StripeAccount>(`/stripe/accounts/${id}`, {\n        method: 'PATCH',\n        data\n    });\n    if (error) throw new Error(error)\n    if (!res) throw new Error('Failed to update account')\n    return res;\n}\n\nexport async function getStripeSubscriptions(accountId: string) {\n    const { data, error } = await request(`/stripe/${accountId}/subscriptions`)\n    if (error) throw new Error(error)\n    return data\n}\n\n\nexport async function deleteStripeAccount(id: string): Promise<void> {\n    const { error } = await request<null>(`/stripe/accounts/${id}`, {\n        method: \"DELETE\"\n    })\n    if (error) throw new Error(error)\n}\n\nexport async function getProducts(accountId?: string): Promise<Product[]> {\n    const url = accountId ? `/stripe/products?accountId=${accountId}` : '/stripe/products';\n    const { data, error } = await request<Product[]>(url)\n    if (error) throw new Error(error)\n    return data || []\n}\n\nexport async function syncProducts(accountId: string): Promise<{ success: boolean; count: number; products: Product[] }> {\n\n    const { data, error } = await request<{ success: boolean; count: number; products: Product[] }>('/stripe/products', {\n        method: 'POST',\n        data: { accountId }\n    })\n\n    if (error) throw new Error(error)\n    if (!data) throw new Error('Failed to sync products')\n    return data\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAGA;;AAMO,eAAe;IAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAkB,oBAAoB;QACvE,QAAQ;IACZ;IACA,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,OAAO;AACX;AAEO,eAAe,iBAAiB,EAAU;IAC7C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAgB,CAAC,iBAAiB,EAAE,IAAI,EAAE;QAC3E,QAAQ;IACZ;IACA,QAAQ,GAAG,CAAC,mBAAmB;QAAE;QAAM;IAAM;IAC7C,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAC3B,OAAO;AACX;AAEO,eAAe;IAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAc,CAAC,gCAAgC,CAAC,EAAE;QACnF,QAAQ;IACZ;IACA,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAC3B,OAAO;AACX;AAEO,eAAe,oBAAoB,IAAyB;IAC/D,MAAM,EAAE,MAAM,GAAG,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAgB,CAAC,gBAAgB,CAAC,EAAE;QAC1E,QAAQ;QACR;IACJ;IACA,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACX;AAEO,eAAe,oBAAoB,EAAU,EAAE,IAAkC;IACpF,MAAM,EAAE,MAAM,GAAG,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAgB,CAAC,iBAAiB,EAAE,IAAI,EAAE;QAChF,QAAQ;QACR;IACJ;IACA,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,IAAI,CAAC,KAAK,MAAM,IAAI,MAAM;IAC1B,OAAO;AACX;AAEO,eAAe,uBAAuB,SAAiB;IAC1D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAC,CAAC,QAAQ,EAAE,UAAU,cAAc,CAAC;IAC1E,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,OAAO;AACX;AAGO,eAAe,oBAAoB,EAAU;IAChD,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAO,CAAC,iBAAiB,EAAE,IAAI,EAAE;QAC5D,QAAQ;IACZ;IACA,IAAI,OAAO,MAAM,IAAI,MAAM;AAC/B;AAEO,eAAe,YAAY,SAAkB;IAChD,MAAM,MAAM,YAAY,CAAC,2BAA2B,EAAE,WAAW,GAAG;IACpE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAAY;IACjD,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,OAAO,QAAQ,EAAE;AACrB;AAEO,eAAe,aAAa,SAAiB;IAEhD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,0LAAO,EAA2D,oBAAoB;QAChH,QAAQ;QACR,MAAM;YAAE;QAAU;IACtB;IAEA,IAAI,OAAO,MAAM,IAAI,MAAM;IAC3B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAC3B,OAAO;AACX"}},
    {"offset": {"line": 1146, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/hooks/use-stripe.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport {\n    getStripeAccounts,\n    getStripeAccount,\n    createStripeAccount,\n    updateStripeAccount,\n    deleteStripeAccount,\n    getProducts,\n    syncProducts,\n    getStripeSubscriptions,\n    getStripeStats,\n} from '@/lib/use-cases/stripe';\nimport { StripeAccountSchema } from '@/lib/validators/stripe';\n\nexport function useStripeAccounts() {\n    return useQuery({\n        queryKey: ['stripe-accounts'],\n        queryFn: getStripeAccounts,\n    });\n}\n\nexport function useStripeAccount(id: string) {\n    return useQuery({\n        queryKey: ['stripe-account', id],\n        queryFn: () => getStripeAccount(id),\n        enabled: !!id,\n    });\n}\n\nexport function useStripeStats() {\n    return useQuery({\n        queryKey: ['stripe-stats'],\n        queryFn: () => getStripeStats(),\n    });\n}\n\nexport function useCreateStripeAccount() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (data: StripeAccountSchema) => createStripeAccount(data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['stripe-accounts'] });\n            queryClient.invalidateQueries({ queryKey: ['products'] });\n        },\n    });\n}\n\nexport function useUpdateStripeAccount(id: string) {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (data: Partial<StripeAccountSchema>) => updateStripeAccount(id, data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['stripe-accounts'] });\n            queryClient.invalidateQueries({ queryKey: ['stripe-account', id] });\n        },\n    });\n}\n\nexport function useDeleteStripeAccount() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (id: string) => deleteStripeAccount(id),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['stripe-accounts'] });\n        },\n    });\n}\n\nexport function useStripeSubscriptions(accountId?: string) {\n    return useQuery({\n        queryKey: ['stripe-subscriptions', accountId],\n        queryFn: () => getStripeSubscriptions(accountId!),\n        enabled: !!accountId,\n    });\n}\n\n\nexport function useProducts(accountId?: string) {\n    return useQuery({\n        queryKey: accountId ? ['products', accountId] : ['products'],\n        queryFn: () => getProducts(accountId),\n    });\n}\n\nexport function useSyncProducts() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (accountId: string) => syncProducts(accountId),\n        onSuccess: (_, accountId) => {\n            queryClient.invalidateQueries({ queryKey: ['products'] });\n            queryClient.invalidateQueries({ queryKey: ['products', accountId] });\n            queryClient.invalidateQueries({ queryKey: ['stripe-accounts'] });\n        },\n    });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;;;AAaO,SAAS;IACZ,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;SAAkB;QAC7B,SAAS,6MAAiB;IAC9B;AACJ;AAEO,SAAS,iBAAiB,EAAU;IACvC,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;YAAkB;SAAG;QAChC,SAAS,IAAM,IAAA,4MAAgB,EAAC;QAChC,SAAS,CAAC,CAAC;IACf;AACJ;AAEO,SAAS;IACZ,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;SAAe;QAC1B,SAAS,IAAM,IAAA,0MAAc;IACjC;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAA8B,IAAA,+MAAmB,EAAC;QAC/D,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAkB;YAAC;YAC9D,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;QAC3D;IACJ;AACJ;AAEO,SAAS,uBAAuB,EAAU;IAC7C,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,OAAuC,IAAA,+MAAmB,EAAC,IAAI;QAC5E,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAkB;YAAC;YAC9D,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAkB;iBAAG;YAAC;QACrE;IACJ;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,KAAe,IAAA,+MAAmB,EAAC;QAChD,WAAW;YACP,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAkB;YAAC;QAClE;IACJ;AACJ;AAEO,SAAS,uBAAuB,SAAkB;IACrD,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU;YAAC;YAAwB;SAAU;QAC7C,SAAS,IAAM,IAAA,kNAAsB,EAAC;QACtC,SAAS,CAAC,CAAC;IACf;AACJ;AAGO,SAAS,YAAY,SAAkB;IAC1C,OAAO,IAAA,mOAAQ,EAAC;QACZ,UAAU,YAAY;YAAC;YAAY;SAAU,GAAG;YAAC;SAAW;QAC5D,SAAS,IAAM,IAAA,uMAAW,EAAC;IAC/B;AACJ;AAEO,SAAS;IACZ,MAAM,cAAc,IAAA,oPAAc;IAElC,OAAO,IAAA,yOAAW,EAAC;QACf,YAAY,CAAC,YAAsB,IAAA,wMAAY,EAAC;QAChD,WAAW,CAAC,GAAG;YACX,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAW;YAAC;YACvD,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;oBAAY;iBAAU;YAAC;YAClE,YAAY,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAkB;YAAC;QAClE;IACJ;AACJ"}},
    {"offset": {"line": 1297, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/components/ui/table.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n    HTMLTableElement,\n    React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n    <div className=\"relative w-full overflow-auto\">\n        <table\n            ref={ref}\n            className={cn(\"w-full caption-bottom text-sm\", className)}\n            {...props}\n        />\n    </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n    HTMLTableSectionElement,\n    React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n    <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n    HTMLTableSectionElement,\n    React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n    <tbody\n        ref={ref}\n        className={cn(\"[&_tr:last-child]:border-0\", className)}\n        {...props}\n    />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n    HTMLTableSectionElement,\n    React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n    <tfoot\n        ref={ref}\n        className={cn(\n            \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n            className\n        )}\n        {...props}\n    />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n    HTMLTableRowElement,\n    React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n    <tr\n        ref={ref}\n        className={cn(\n            \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n            className\n        )}\n        {...props}\n    />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n    HTMLTableCellElement,\n    React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n    <th\n        ref={ref}\n        className={cn(\n            \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n            className\n        )}\n        {...props}\n    />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n    HTMLTableCellElement,\n    React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n    <td\n        ref={ref}\n        className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n        {...props}\n    />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n    HTMLTableCaptionElement,\n    React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n    <caption\n        ref={ref}\n        className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n        {...props}\n    />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n    Table,\n    TableHeader,\n    TableBody,\n    TableFooter,\n    TableHead,\n    TableRow,\n    TableCell,\n    TableCaption,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,+PAAgB,CAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QAAI,WAAU;kBACX,cAAA,0RAAC;YACG,KAAK;YACL,WAAW,IAAA,6KAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIrB,MAAM,WAAW,GAAG;AAEpB,MAAM,4BAAc,+PAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QAAM,KAAK;QAAK,WAAW,IAAA,6KAAE,EAAC,mBAAmB;QAAa,GAAG,KAAK;;;;;;AAE3E,YAAY,WAAW,GAAG;AAE1B,MAAM,0BAAY,+PAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGjB,UAAU,WAAW,GAAG;AAExB,MAAM,4BAAc,+PAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EACT,2DACA;QAEH,GAAG,KAAK;;;;;;AAGjB,YAAY,WAAW,GAAG;AAE1B,MAAM,yBAAW,+PAAgB,CAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EACT,+EACA;QAEH,GAAG,KAAK;;;;;;AAGjB,SAAS,WAAW,GAAG;AAEvB,MAAM,0BAAY,+PAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EACT,oGACA;QAEH,GAAG,KAAK;;;;;;AAGjB,UAAU,WAAW,GAAG;AAExB,MAAM,0BAAY,+PAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EAAC,kDAAkD;QAC/D,GAAG,KAAK;;;;;;AAGjB,UAAU,WAAW,GAAG;AAExB,MAAM,6BAAe,+PAAgB,CAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,0RAAC;QACG,KAAK;QACL,WAAW,IAAA,6KAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGjB,aAAa,WAAW,GAAG"}},
    {"offset": {"line": 1413, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/components/dashboard/stripe-accounts-list.tsx"],"sourcesContent":["\"use client\"\n\nimport {\n    Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n} from \"@/components/ui/table\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { TrendingUp, TrendingDown, Minus } from \"lucide-react\"\n\ninterface StripeStats {\n    accountId: string;\n    accountName: string;\n    monthlyAnalytics: any[];\n    currentSnapshot: { mrr: number; arr: number; activeCustomers: number };\n}\n\ninterface StripeAccountsListProps {\n    stripeStats: StripeStats[] | undefined;\n}\n\nexport function StripeAccountsList({ stripeStats }: StripeAccountsListProps) {\n    if (!stripeStats || stripeStats.length === 0) {\n        return null;\n    }\n\n    const formatCurrency = (value: number) =>\n        value.toLocaleString('fr-FR', { style: 'currency', currency: 'EUR', maximumFractionDigits: 0 });\n\n    return (\n        <Card className=\"col-span-4\">\n            <CardHeader>\n                <CardTitle>Performance par Compte Stripe</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <Table>\n                    <TableHeader>\n                        <TableRow>\n                            <TableHead>Compte</TableHead>\n                            <TableHead>MRR</TableHead>\n                            <TableHead>ARR</TableHead>\n                            <TableHead>Clients Actifs</TableHead>\n                            <TableHead>Tendance (Mois)</TableHead>\n                        </TableRow>\n                    </TableHeader>\n                    <TableBody>\n                        {stripeStats.map((stat) => {\n                            // Calculate simple trend based on last 2 months if available\n                            const lastMonth = stat.monthlyAnalytics[stat.monthlyAnalytics.length - 1];\n                            const prevMonth = stat.monthlyAnalytics[stat.monthlyAnalytics.length - 2];\n\n                            let trend = 0;\n                            if (lastMonth && prevMonth && prevMonth.endingMRR > 0) {\n                                trend = ((lastMonth.endingMRR - prevMonth.endingMRR) / prevMonth.endingMRR) * 100;\n                            }\n\n                            return (\n                                <TableRow key={stat.accountId}>\n                                    <TableCell className=\"font-medium\">\n                                        {stat.accountName}\n                                    </TableCell>\n                                    <TableCell>{formatCurrency(stat.currentSnapshot.mrr)}</TableCell>\n                                    <TableCell>{formatCurrency(stat.currentSnapshot.arr)}</TableCell>\n                                    <TableCell>{stat.currentSnapshot.activeCustomers}</TableCell>\n                                    <TableCell>\n                                        <div className=\"flex items-center gap-2\">\n                                            {trend > 0 ? (\n                                                <TrendingUp className=\"h-4 w-4 text-green-500\" />\n                                            ) : trend < 0 ? (\n                                                <TrendingDown className=\"h-4 w-4 text-red-500\" />\n                                            ) : (\n                                                <Minus className=\"h-4 w-4 text-muted-foreground\" />\n                                            )}\n                                            <span className={`text-sm ${trend > 0 ? 'text-green-600' : trend < 0 ? 'text-red-600' : 'text-muted-foreground'\n                                                }`}>\n                                                {Math.abs(trend).toFixed(1)}%\n                                            </span>\n                                        </div>\n                                    </TableCell>\n                                </TableRow>\n                            );\n                        })}\n                    </TableBody>\n                </Table>\n            </CardContent>\n        </Card>\n    )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAQA;AACA;AAAA;AAAA;AAXA;;;;;AAwBO,SAAS,mBAAmB,EAAE,WAAW,EAA2B;IACvE,IAAI,CAAC,eAAe,YAAY,MAAM,KAAK,GAAG;QAC1C,OAAO;IACX;IAEA,MAAM,iBAAiB,CAAC,QACpB,MAAM,cAAc,CAAC,SAAS;YAAE,OAAO;YAAY,UAAU;YAAO,uBAAuB;QAAE;IAEjG,qBACI,0RAAC,4LAAI;QAAC,WAAU;;0BACZ,0RAAC,kMAAU;0BACP,cAAA,0RAAC,iMAAS;8BAAC;;;;;;;;;;;0BAEf,0RAAC,mMAAW;0BACR,cAAA,0RAAC,8LAAK;;sCACF,0RAAC,oMAAW;sCACR,cAAA,0RAAC,iMAAQ;;kDACL,0RAAC,kMAAS;kDAAC;;;;;;kDACX,0RAAC,kMAAS;kDAAC;;;;;;kDACX,0RAAC,kMAAS;kDAAC;;;;;;kDACX,0RAAC,kMAAS;kDAAC;;;;;;kDACX,0RAAC,kMAAS;kDAAC;;;;;;;;;;;;;;;;;sCAGnB,0RAAC,kMAAS;sCACL,YAAY,GAAG,CAAC,CAAC;gCACd,6DAA6D;gCAC7D,MAAM,YAAY,KAAK,gBAAgB,CAAC,KAAK,gBAAgB,CAAC,MAAM,GAAG,EAAE;gCACzE,MAAM,YAAY,KAAK,gBAAgB,CAAC,KAAK,gBAAgB,CAAC,MAAM,GAAG,EAAE;gCAEzE,IAAI,QAAQ;gCACZ,IAAI,aAAa,aAAa,UAAU,SAAS,GAAG,GAAG;oCACnD,QAAQ,AAAC,CAAC,UAAU,SAAS,GAAG,UAAU,SAAS,IAAI,UAAU,SAAS,GAAI;gCAClF;gCAEA,qBACI,0RAAC,iMAAQ;;sDACL,0RAAC,kMAAS;4CAAC,WAAU;sDAChB,KAAK,WAAW;;;;;;sDAErB,0RAAC,kMAAS;sDAAE,eAAe,KAAK,eAAe,CAAC,GAAG;;;;;;sDACnD,0RAAC,kMAAS;sDAAE,eAAe,KAAK,eAAe,CAAC,GAAG;;;;;;sDACnD,0RAAC,kMAAS;sDAAE,KAAK,eAAe,CAAC,eAAe;;;;;;sDAChD,0RAAC,kMAAS;sDACN,cAAA,0RAAC;gDAAI,WAAU;;oDACV,QAAQ,kBACL,0RAAC,4QAAU;wDAAC,WAAU;;;;;+DACtB,QAAQ,kBACR,0RAAC,kRAAY;wDAAC,WAAU;;;;;6EAExB,0RAAC,yPAAK;wDAAC,WAAU;;;;;;kEAErB,0RAAC;wDAAK,WAAW,CAAC,QAAQ,EAAE,QAAQ,IAAI,mBAAmB,QAAQ,IAAI,iBAAiB,yBAClF;;4DACD,KAAK,GAAG,CAAC,OAAO,OAAO,CAAC;4DAAG;;;;;;;;;;;;;;;;;;;mCAlB7B,KAAK,SAAS;;;;;4BAwBrC;;;;;;;;;;;;;;;;;;;;;;;AAMxB"}},
    {"offset": {"line": 1624, "column": 0}, "map": {"version":3,"sources":["file:///Users/sethylaleye/Documents/Code/solopreneur-tool/apps/web/app/dashboard/page.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { useClients } from '@/hooks/use-clients';\nimport { useDevisList } from '@/hooks/use-devis';\nimport { useFacturesList } from '@/hooks/use-factures';\nimport { useRecettesList } from '@/hooks/use-recettes'; // Assuming this provides non-recurring revenue\nimport { StatsCard } from '@/components/dashboard/stats-card';\nimport { RevenueChart } from '@/components/dashboard/revenue-chart';\nimport { RecentActivity } from '@/components/dashboard/recent-activity';\nimport {\n    Users,\n    FileText,\n    Euro,\n    TrendingUp,\n    Calendar,\n    AlertCircle,\n    UserX, // For Churn\n    Activity, // For Growth/Trend\n} from 'lucide-react';\nimport { useStripeStats } from '@/hooks/use-stripe';\nimport { StripeAccountsList } from '@/components/dashboard/stripe-accounts-list';\n\nexport default function DashboardPage() {\n    const { data: clients } = useClients();\n    const { data: devisList } = useDevisList();\n    const { data: facturesList } = useFacturesList();\n    const { data: recettesList } = useRecettesList(); // Non-recurring revenue\n    const { data: stripeStats, isLoading: isLoadingStripe } = useStripeStats(); // Fetch the new calculated data\n\n    // Helper to format currency\n    const formatCurrency = (value: number) =>\n        value.toLocaleString('fr-FR', { style: 'currency', currency: 'EUR', maximumFractionDigits: 0 });\n\n    const stats = useMemo(() => {\n        const currentYear = new Date().getFullYear();\n        const currentMonth = new Date().getMonth();\n        const lastMonth = currentMonth === 0 ? 11 : currentMonth - 1;\n        const lastMonthYear = currentMonth === 0 ? currentYear - 1 : currentYear;\n\n        let totalRevenue = 0;\n        let yearRevenue = 0;\n        let monthRevenue = 0;\n        let lastMonthRevenue = 0;\n\n        // Calculate non-recurring revenue stats from recettesList\n        recettesList?.forEach(r => {\n            const date = new Date(r.date);\n            const amount = Number(r.amount);\n\n            totalRevenue += amount;\n\n            if (date.getFullYear() === currentYear) {\n                yearRevenue += amount;\n            }\n\n            if (date.getFullYear() === currentYear && date.getMonth() === currentMonth) {\n                monthRevenue += amount;\n            }\n\n            if (date.getFullYear() === lastMonthYear && date.getMonth() === lastMonth) {\n                lastMonthRevenue += amount;\n            }\n        });\n\n        // --- Non-Recurring Financials ---\n        const pendingAmount = facturesList?.filter(f => f.status === 'pending')\n            .reduce((sum, f) => sum + Number(f.total), 0) || 0;\n        const taxDue = yearRevenue * 0.22; // Assuming 22% tax on yearly revenue\n\n        const growthTrend = lastMonthRevenue > 0\n            ? ((monthRevenue - lastMonthRevenue) / lastMonthRevenue) * 100\n            : 0;\n\n        // --- Stripe Analytics Aggregation ---\n        // Aggregate all Stripe accounts' MRR/ARR/Customers\n        const combinedStripeData = stripeStats?.reduce((acc, stat) => {\n            const currentSnapshot = stat.currentSnapshot;\n            acc.mrr += currentSnapshot.mrr;\n            acc.arr += currentSnapshot.arr;\n            acc.activeCustomers += currentSnapshot.activeCustomers;\n\n            // Get the latest month's analytics to find the churn rate\n            const latestMonth = stat.monthlyAnalytics.slice(-1)[0];\n            if (latestMonth) {\n                acc.latestCustomerChurnRate = (acc.latestCustomerChurnRate * acc.accountCount + latestMonth.customerChurnRate) / (acc.accountCount + 1);\n            }\n            acc.accountCount++;\n            return acc;\n        }, { mrr: 0, arr: 0, activeCustomers: 0, latestCustomerChurnRate: 0, accountCount: 0 });\n\n        return {\n            totalRevenue,\n            yearRevenue,\n            monthRevenue,\n            pendingAmount,\n            taxDue,\n            growthTrend,\n            clientCount: clients?.length || 0,\n            devisCount: devisList?.length || 0,\n            facturesCount: facturesList?.length || 0,\n\n            // Stripe/Recurring Metrics\n            combinedStripeData,\n        };\n    }, [clients, devisList, facturesList, recettesList, stripeStats]);\n\n\n    // Determine the main MRR/ARR and churn\n    const primaryMRR = stats.combinedStripeData?.mrr || 0;\n    const primaryARR = stats.combinedStripeData?.arr || 0;\n    const primaryChurnRate = stats.combinedStripeData?.latestCustomerChurnRate || 0;\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n                <h1 className=\"text-lg font-semibold md:text-2xl\">Tableau de Bord</h1>\n            </div>\n\n            {/* --- SECTION 1: KEY FINANCIAL METRICS (Global) --- */}\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n                <StatsCard\n                    title=\"MRR Total\"\n                    value={formatCurrency(primaryMRR)}\n                    description=\"Revenu mensuel récurrent (Stripe)\"\n                    icon={TrendingUp}\n                />\n                <StatsCard\n                    title=\"ARR Total\"\n                    value={formatCurrency(primaryARR)}\n                    description=\"Revenu annuel récurrent (Stripe)\"\n                    icon={Calendar}\n                />\n                <StatsCard\n                    title=\"CA du Mois (Non-Récur.)\"\n                    value={formatCurrency(stats.monthRevenue)}\n                    description=\"Hors abonnements\"\n                    icon={Euro}\n                    trend={{\n                        value: Math.round(stats.growthTrend),\n                        isPositive: stats.growthTrend >= 0,\n                    }}\n                />\n                <StatsCard\n                    title=\"Factures en Attente\"\n                    value={formatCurrency(stats.pendingAmount)}\n                    description=\"Montant à encaisser\"\n                    icon={FileText}\n                />\n            </div>\n\n            {/* --- SECTION 2: CHARTS & ACTIVITY --- */}\n            <div className=\"grid gap-4 md:grid-cols-7\">\n                <RevenueChart\n                    recettes={recettesList?.map(r => ({ ...r, amount: Number(r.amount) })) || []}\n                    stripeStats={stripeStats} // Pass the time series data for charting MRR\n                />\n                <RecentActivity factures={facturesList || []} />\n            </div>\n\n            {/* --- SECTION 3: STRIPE ACCOUNTS BREAKDOWN --- */}\n            <StripeAccountsList stripeStats={stripeStats} />\n\n            {/* --- SECTION 4: OPERATIONAL SUMMARY --- */}\n            <div className=\"grid gap-4 md:grid-cols-4\">\n                <StatsCard\n                    title=\"Clients Actifs (Stripe)\"\n                    value={stats.combinedStripeData?.activeCustomers || 0}\n                    description=\"Abonnements en cours\"\n                    icon={Users}\n                />\n                <StatsCard\n                    title=\"Taux de Churn\"\n                    value={`${primaryChurnRate.toFixed(2)}%`}\n                    description=\"Moyenne sur tous les comptes\"\n                    icon={UserX}\n                    trend={{\n                        value: primaryChurnRate,\n                        isPositive: primaryChurnRate <= 0,\n                    }}\n                />\n                <StatsCard\n                    title=\"CA Annuel (Non-Récur.)\"\n                    value={formatCurrency(stats.yearRevenue)}\n                    description={`Année 2025`}\n                    icon={Activity}\n                />\n                <StatsCard\n                    title=\"Charges Estimées\"\n                    value={formatCurrency(stats.taxDue)}\n                    description=\"URSSAF (22% estimé)\"\n                    icon={AlertCircle}\n                />\n            </div>\n        </div>\n    );\n}"],"names":[],"mappings":"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"}}]
}