module.exports=[56225,4733,a=>{"use strict";var b=a.i(77566);a.s(["z",0,b],56225);let c=(0,a.i(57409).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>c],4733)},68802,a=>{"use strict";var b=a.i(91346),c=a.i(30271),d=a.i(88629);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},49886,a=>{"use strict";var b=a.i(70973),c=a.i(52804),d=a.i(17915),e=a.i(41506);async function f(){let a=await (0,e.request)("/clients");if(a.error)throw Error(a.error);return a.data||[]}async function g(a){let b=await (0,e.request)("/clients",{method:"POST",data:a});if(b.error)throw Error(b.error);if(!b.data)throw Error("Failed to create client");return b.data}async function h(a,b){let c=await (0,e.request)(`/clients/${a}`,{method:"PATCH",data:b});if(c.error)throw Error(c.error);if(!c.data)throw Error("Failed to update client");return c.data}async function i(a){if(!a)return;let b=await (0,e.request)(`/clients/${a}`,{method:"DELETE"});if(b.error)throw Error(b.error)}function j(){return(0,b.useQuery)({queryKey:["clients"],queryFn:f})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>g(a),onSuccess:()=>{a.invalidateQueries({queryKey:["clients"]})}})}function l(a){let b=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:b=>h(a,b),onSuccess:()=>{b.invalidateQueries({queryKey:["clients"]}),b.invalidateQueries({queryKey:["client",a]})}})}function m(a){let b=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:()=>i(a),onSuccess:()=>{b.invalidateQueries({queryKey:["clients"]}),b.invalidateQueries({queryKey:["client",a]})}})}a.s(["useClients",()=>j,"useCreateClient",()=>k,"useDeleteClient",()=>m,"useUpdateClient",()=>l],49886)},72561,21139,a=>{"use strict";let b=(0,a.i(57409).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>b],72561);var c=a.i(91346),d=a.i(64006),e=a.i(21717),f=a.i(98626);function g({handleDelete:a,id:b,ressource:g}){return(0,c.jsxs)(d.AlertDialog,{children:[(0,c.jsx)(d.AlertDialogTrigger,{asChild:!0,children:(0,c.jsx)(e.Button,{variant:"ghost",size:"icon",className:"text-destructive",children:(0,c.jsx)(f.Trash2,{className:"h-4 w-4"})})}),(0,c.jsxs)(d.AlertDialogContent,{children:[(0,c.jsxs)(d.AlertDialogHeader,{children:["Êtes-vous sûr de vouloir supprimer ce ",g," ?"]}),(0,c.jsxs)(d.AlertDialogDescription,{children:["Cette action supprimera définitivement le ",g," de la base de données."]}),(0,c.jsxs)(d.AlertDialogFooter,{children:[(0,c.jsx)(d.AlertDialogCancel,{children:"Annuler"}),(0,c.jsxs)(d.AlertDialogAction,{onClick:()=>a(b),children:[(0,c.jsx)(f.Trash2,{className:"text-destructive"}),"Supprimer"]})]})]})]})}a.s(["DeleteDialiog",()=>g],21139)},99730,a=>{"use strict";let b=(0,a.i(57409).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],99730)},214,a=>{"use strict";var b=a.i(91346),c=a.i(30271),d=a.i(68802),e=a.i(21717),f=a.i(72561),g=a.i(82519),h=a.i(99730),i=a.i(61751),j=a.i(49886),k=a.i(19354),l=a.i(70308),m=a.i(74871),n=a.i(56225);let o=n.z.object({name:n.z.string().min(1,"Le nom est requis"),email:n.z.string().email("Email invalide").optional().or(n.z.literal("")).nullable(),phone:n.z.string().optional().nullable(),address:n.z.string().optional().nullable(),notes:n.z.string().optional().nullable()});var p=a.i(85058),q=a.i(71195),r=a.i(77486),s=a.i(4733),t=a.i(77340);function u({open:a,onOpenChange:d,initialData:f,clientId:g}){let h=(0,j.useCreateClient)(),i=(0,j.useUpdateClient)(g||""),n=(0,l.useForm)({resolver:(0,m.zodResolver)(o),defaultValues:f||{name:"",email:"",phone:"",address:"",notes:""}});(0,c.useEffect)(()=>{n.reset(f||{name:"",email:"",phone:"",address:"",notes:""})},[f,n]);let u=async a=>{let b=g?i:h;r.toast.promise(b.mutateAsync(a).then(()=>{d(!1),n.reset()}),{loading:g?"Mise à jour...":"Création...",success:g?"Client mis à jour !":"Client créé !",error:a=>"Erreur: "+a.message})},v=h.isPending||i.isPending;return(0,b.jsxs)(k.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(k.DialogHeader,{children:(0,b.jsx)(k.DialogTitle,{children:g?"Modifier le client":"Nouveau client"})}),(0,b.jsx)(p.Form,{...n,children:(0,b.jsxs)("form",{onSubmit:n.handleSubmit(u),children:[(0,b.jsx)(p.FormField,{control:n.control,name:"name",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Nom *"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"Nom du client",...a})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:n.control,name:"email",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Email"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{type:"email",placeholder:"email@example.com",...a,value:a.value||""})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:n.control,name:"phone",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Téléphone"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"+33 6 12 34 56 78",...a,value:a.value||""})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:n.control,name:"address",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Adresse"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"Adresse complète",...a,value:a.value||""})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:n.control,name:"notes",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"Notes"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"Notes additionnelles",...a,value:a.value||""})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsxs)(k.DialogFooter,{className:"mt-4",children:[(0,b.jsx)(t.DialogClose,{asChild:!0,children:(0,b.jsx)(e.Button,{type:"button",variant:"outline",children:"Annuler"})}),(0,b.jsx)(e.Button,{type:"submit",disabled:v,children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Enregistrement..."]}):"Enregistrer"})]})]})})]})}function v({open:a,onOpenChange:c,initialData:d,clientId:e}){return(0,b.jsx)(k.Dialog,{open:a,onOpenChange:c,children:(0,b.jsx)(u,{open:a,onOpenChange:c,initialData:d,clientId:e})})}var w=a.i(21139);function x(){let{data:a,isLoading:k,error:l}=(0,j.useClients)(),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),q=(0,j.useDeleteClient)(o?.id),s=a||[];if(k)return(0,b.jsx)("div",{children:"Chargement..."});if(l)return(0,b.jsx)("div",{children:"Erreur lors du chargement des clients"});let t=async a=>{r.toast.promise(q.mutateAsync,{loading:"Suppression du client...",success:"Client supprimé",error:a=>"Erreur : "+a.message})};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,b.jsx)(i.CardTitle,{className:"px-4",children:(0,b.jsx)(h.Users,{})}),(0,b.jsxs)(e.Button,{onClick:()=>{p(null),n(!0)},children:[(0,b.jsx)(g.Plus,{className:"mr-2 h-4 w-4"})," Nouveau Client"]})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)(d.Table,{children:[(0,b.jsx)(d.TableHeader,{children:(0,b.jsxs)(d.TableRow,{children:[(0,b.jsx)(d.TableHead,{children:"Nom"}),(0,b.jsx)(d.TableHead,{children:"Email"}),(0,b.jsx)(d.TableHead,{children:"Téléphone"}),(0,b.jsx)(d.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsxs)(d.TableBody,{children:[s.map(a=>(0,b.jsxs)(d.TableRow,{children:[(0,b.jsx)(d.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(d.TableCell,{children:a.email||"-"}),(0,b.jsx)(d.TableCell,{children:a.phone||"-"}),(0,b.jsxs)(d.TableCell,{className:"text-right",children:[(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>{p(a),n(!0)},children:(0,b.jsx)(f.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(w.DeleteDialiog,{handleDelete:t,id:a.id,ressource:"client"})]})]},a.id)),0===s.length&&(0,b.jsx)(d.TableRow,{children:(0,b.jsx)(d.TableCell,{colSpan:4,className:"text-center text-muted-foreground",children:"Aucun client trouvé."})})]})]})})]}),(0,b.jsx)(v,{open:m,onOpenChange:()=>{n(!1),p(null)},initialData:o||void 0,clientId:o?.id})]})}a.s(["ClientTable",()=>x],214)}];

//# sourceMappingURL=Documents_Code_solopreneur-tool_9d8eb763._.js.map