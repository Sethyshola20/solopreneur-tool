{"version":3,"sources":["../../../../../../../../../Documents/Code/solopreneur-tool/node_modules/lucide-react/src/icons/loader-circle.ts","../../../../../../../../../Documents/Code/solopreneur-tool/apps/web/components/settings/settings-form.tsx","../../../../../../../../../Documents/Code/solopreneur-tool/apps/web/lib/validators/settings.ts","../../../../../../../../../Documents/Code/solopreneur-tool/apps/web/lib/use-cases/settings.ts","../../../../../../../../../Documents/Code/solopreneur-tool/apps/web/hooks/use-settings.ts","../../../../../../../../../Documents/Code/solopreneur-tool/apps/web/app/dashboard/settings/page.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M21 12a9 9 0 1 1-6.219-8.56', key: '13zald' }]];\n\n/**\n * @component @name LoaderCircle\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTJhOSA5IDAgMSAxLTYuMjE5LTguNTYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/loader-circle\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst LoaderCircle = createLucideIcon('loader-circle', __iconNode);\n\nexport default LoaderCircle;\n","'use client';\n\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { settingsSchema, type SettingsSchema } from '@/lib/validators/settings';\nimport { Button } from '@/components/ui/button';\nimport {\n    Form,\n    FormControl,\n    FormField,\n    FormItem,\n    FormLabel,\n    FormMessage,\n    FormDescription,\n} from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { useSaveSettings } from '@/hooks/use-settings';\nimport { toast } from 'sonner';\nimport { Loader2 } from 'lucide-react';\n\ninterface SettingsFormProps {\n    initialData?: SettingsSchema | null;\n}\n\nexport function SettingsForm({ initialData }: SettingsFormProps) {\n    const saveMutation = useSaveSettings();\n\n    const form = useForm<SettingsSchema>({\n        resolver: zodResolver(settingsSchema),\n        defaultValues: initialData || {\n            companyName: '',\n            siret: '',\n            address: '',\n            email: '',\n            logoUrl: '',\n            legalMentions: '',\n        },\n    });\n\n    const onSubmit = async (data: SettingsSchema) => {\n        toast.promise(\n            saveMutation.mutateAsync(data),\n            {\n                loading: 'Enregistrement...',\n                success: 'Paramètres enregistrés avec succès !',\n                error: (error) => 'Erreur: ' + error.message,\n            }\n        );\n    };\n\n    return (\n        <Card className=\"w-full max-w-2xl mx-auto\">\n            <CardHeader>\n                <CardTitle>Paramètres de l'entreprise</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <Form {...form}>\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n                        <FormField\n                            control={form.control}\n                            name=\"companyName\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>Nom de l'entreprise</FormLabel>\n                                    <FormControl>\n                                        <Input placeholder=\"Ma Micro-Entreprise\" {...field} value={field.value || ''} />\n                                    </FormControl>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n\n                        <FormField\n                            control={form.control}\n                            name=\"siret\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>SIRET</FormLabel>\n                                    <FormControl>\n                                        <Input placeholder=\"123 456 789 00012\" {...field} value={field.value || ''} />\n                                    </FormControl>\n                                    <FormDescription>\n                                        Numéro SIRET à 14 chiffres\n                                    </FormDescription>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n\n                        <FormField\n                            control={form.control}\n                            name=\"address\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>Adresse</FormLabel>\n                                    <FormControl>\n                                        <Input placeholder=\"123 Rue de la République, 75001 Paris\" {...field} value={field.value || ''} />\n                                    </FormControl>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n\n                        <FormField\n                            control={form.control}\n                            name=\"email\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>Email</FormLabel>\n                                    <FormControl>\n                                        <Input type=\"email\" placeholder=\"contact@entreprise.fr\" {...field} value={field.value || ''} />\n                                    </FormControl>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n\n                        <FormField\n                            control={form.control}\n                            name=\"logoUrl\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>URL du Logo</FormLabel>\n                                    <FormControl>\n                                        <Input placeholder=\"https://...\" {...field} value={field.value || ''} />\n                                    </FormControl>\n                                    <FormDescription>\n                                        URL publique de votre logo\n                                    </FormDescription>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n\n                        <FormField\n                            control={form.control}\n                            name=\"legalMentions\"\n                            render={({ field }) => (\n                                <FormItem>\n                                    <FormLabel>Mentions légales</FormLabel>\n                                    <FormControl>\n                                        <Input placeholder=\"Mentions légales par défaut\" {...field} value={field.value || ''} />\n                                    </FormControl>\n                                    <FormMessage />\n                                </FormItem>\n                            )}\n                        />\n\n                        <Button type=\"submit\" disabled={saveMutation.isPending} className=\"w-full\">\n                            {saveMutation.isPending ? (\n                                <>\n                                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                                    Enregistrement...\n                                </>\n                            ) : (\n                                'Enregistrer'\n                            )}\n                        </Button>\n                    </form>\n                </Form>\n            </CardContent>\n        </Card>\n    );\n}\n","import { z } from 'zod';\n\nexport const settingsSchema = z.object({\n    companyName: z.string().optional().nullable(),\n    siret: z.string().optional().nullable(),\n    address: z.string().optional().nullable(),\n    email: z.string().email('Email invalide').optional().or(z.literal('')).nullable(),\n    logoUrl: z.string().optional().nullable(),\n    legalMentions: z.string().optional().nullable(),\n});\n\nexport type SettingsSchema = z.infer<typeof settingsSchema>;\n","\nimport { type InferSelectModel } from 'drizzle-orm';\nimport { settings } from '@/lib/db/schema';\nimport { SettingsSchema } from '../validators/settings';\nimport { request } from '@/api_service';\n\nexport type Settings = InferSelectModel<typeof settings>;\n\nexport async function getSettings(): Promise<Settings | null> {\n    const res = await request<Settings | null>('/settings');\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    return res.data;\n}\n\nexport async function saveSettings(data: SettingsSchema): Promise<Settings> {\n    const res = await request<Settings>('/settings', {\n        method: 'POST',\n        data,\n    });\n\n    if (res.error) {\n        throw new Error(res.error);\n    }\n    if (!res.data) {\n        throw new Error('Failed to save settings');\n    }\n    return res.data;\n}\n","import { getSettings, saveSettings } from '@/lib/use-cases/settings';\nimport { SettingsSchema } from '@/lib/validators/settings';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\n\n\nexport function useSettings() {\n    return useQuery({\n        queryKey: ['settings'],\n        queryFn: getSettings,\n    });\n}\n\nexport function useSaveSettings() {\n    const queryClient = useQueryClient();\n\n    return useMutation({\n        mutationFn: (data: SettingsSchema) => saveSettings(data),\n        onSuccess: () => {\n            queryClient.invalidateQueries({ queryKey: ['settings'] });\n        },\n    });\n}\n","'use client';\n\nimport { SettingsForm } from '@/components/settings/settings-form';\nimport { useSettings } from '@/hooks/use-settings';\n\n\nexport default function SettingsPage() {\n    const { data: settings, isLoading, error } = useSettings();\n    if (isLoading) return <div>Chargement...</div>;\n    if (error) return <div>Erreur lors du chargement des paramètres</div>;\n\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"flex items-center\">\n                <h1 className=\"text-lg font-semibold md:text-2xl\">Paramètres</h1>\n            </div>\n            <SettingsForm initialData={settings} />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}